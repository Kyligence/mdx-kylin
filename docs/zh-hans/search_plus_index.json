{"./":{"url":"./","title":"Introduction","keywords":"","body":"MDX for Kylin 概述 MDX for Kylin 是基于 Mondrian 二次开发的、由 Kyligence 贡献的、使用 Apache Kylin 作为数据源的 MDX 查询引擎 。MDX for Kylin 的使用体验比较接近 Microsoft SSAS，可以集成多种数据分析工具，包括 Microsoft Excel、Tableau 等，可以为大数据分析场景下提供更极致的体验。 MDX for Kylin 是在决策支持和业务分析中使用的分析数据引擎。MDX for Kylin 助力消除数据孤岛，统一数据口径，提高数据业务转化效率，提升运营决策能力。欢迎阅读 技术文章 了解更多。 MDX for Kylin 相对其它开源 MDX 查询引擎，具有以下优势： 更好支持 BI (Excel/Tableau/Power BI 等) 产品，适配 XMLA 协议； 针对 BI 的 MDX Query 进行了特定优化重写； 适配 Kylin 查询，通过 Kylin 的预计算能力加速 MDX 查询； 通过简洁易懂的操作界面，提供了统一的指标定义和管理能力。 语义层 - 强大的业务语义层和MDX查询接口 MDX for Kylin 能自动同步 Kylin 中的模型，并基于这些模型进行语义定义，将数据模型转换为业务友好的语言，赋予数据业务价值。MDX for Kylin 语义层为业务提供统一的分析指标库，支持年累计，月累计，同比环比等复杂业务计算，统一业务数据口径。MDX for Kylin 语义层还提供了 MDX 查询接口，可以对接 Excel、Tableau、Smartbi 等 BI 工具进行多维分析。 细粒度权限管控 MDX for Kylin 提供了对于数据集所有语义信息的权限管控，满足分析平台对于数据安全管理的需求。 Powered by Gitbook.            Last Modified： 2022-03-30 18:30:19 "},"installation/":{"url":"installation/","title":"安装","keywords":"","body":"安装启动 在本章中，将为您介绍 MDX for Kylin 安装的前置条件、安装步骤、卸载方式 Powered by Gitbook.            Last Modified： 2022-03-16 17:10:17 "},"installation/prerequisite.cn.html":{"url":"installation/prerequisite.cn.html","title":"安装前置条件","keywords":"","body":"安装前置条件 为了保障系统的性能与稳定性，我们建议您将 MDX for Kylin 单独运行在一个独立的 Linux 服务器上。 下面我们将为您介绍 MDX for Kylin 安装的前置条件。 Kylin 推荐的硬件配置 推荐的 Linux 版本 需要的依赖 推荐的元数据库版本 推荐的元数据库驱动版本 推荐的客户端配置 Kylin MDX for Kylin 需要对接一个 Kylin 实例或集群，现在 MDX for Kylin 能对接 Kylin 版本为 4.0.2 及以上 如果有需要低于 Kylin 4.x 版本，请参考链接 推荐的硬件配置 我们推荐您使用下述硬件配置安装 MDX for Kylin： 双路 Intel 至强处理器，6核（或8核）CPU，主频 2.3GHz 或以上 32GB ECC DDR3 以上 至少1个 1TB 的 SAS 硬盘（3.5寸），7200RPM，RAID1 至少两个 1GbE 的以太网电口 推荐的 Linux 版本 我们推荐您使用下述版本的 Linux 操作系统： Red Hat Enterprise 7.x CentOS 6.4+ 或 7.x Suse Linux 11 Ubuntu 16 需要的依赖 JAVA 环境：JDK8 或以上 推荐的元数据库版本 MySQL 5.7.x 及以上 推荐的元数据库驱动 jar 版本 mysql-connector-java-8.0.16, 请下载到 /semantic-mdx/lib/ 下或者替换所需的 mysql connector 版本到该路径下 推荐的客户端配置 CPU：2.5 GHz Intel Core i7 操作系统：macOS / windows 7 或 10 内存：8G 或以上 浏览器及版本： 谷歌Chrome 67.0.3396 及以上 Powered by Gitbook.            Last Modified： 2022-03-25 16:27:47 "},"installation/install_linux.cn.html":{"url":"installation/install_linux.cn.html","title":"在 Linux 环境安装","keywords":"","body":"在 Linux 环境安装 在本节中，我们将引导您在 Linux 操作系统环境中快速安装 MDX for Kylin。 请确保您的服务器满足 MDX for Kylin 的安装要求，MDX for Kylin 对服务器的要求请参阅安装前置条件。 下载安装包 创建数据库 解压安装包 加密元数据库访问密码 修改配置文件 启动 MDX for Kylin 注意事项 下载安装包 首先访问 Github 地址 下载 MDX for Kylin 安装包 创建数据库 创建一个全新的数据库，并将 character_set_database 设定为 utf8mb4 或 utf8, 将 collation_server 设定为 utf8mb4_unicode_ci 或 utf8_unicode_ci， 注意： MySQL 5.7 中的样例创建数据库语句如下： mysql> create database `` default character set utf8mb4 collate utf8mb4_unicode_ci; PostgreSQL 10.1 中的样例创建数据库语句如下： postgresql> create database encoding='utf8'; 解压安装包 解压缩 MDX for Kylin 安装包 $ tar -xf [安装包文件名] 如: $ tar -xf mdx-for-kylin-1.0.0-beta.tar.gz 加密元数据库访问密码 读取解压后的文件；加密 MDX for Kylin 数据库密码，并记录返回的字符 $ cd [解压后文件] $ bin/mdx.sh encrypt '' 注意：如果输入的密码包含特殊字符, 需要用单引号包裹, 如果密码里面有单引号, 那么可以用双引号包裹. 修改配置文件 修改 conf 目录下的配置文件： 配置 insight.properties 参数。 $ vi conf/insight.properties 修改以下配置项： insight.kylin.host: 需要连接的 Kylin 服务器的 IP 地址或 Hostname insight.kylin.port: 需要连接的 Kylin 服务器的端口号 insight.kylin.ssl: 需要连接的 kylin 是否启用了 SSL，默认为 false insight.database.type: 需要连接的 MDX for Kylin 数据库的类型，默认为 mysql, 如果使用PostgreSQL作为元数据库，需要更改类型为postgresql insight.database.useSSL: 需要连接的 MDX for Kylin 数据库是否使用SSL连接，默认为 false insight.database.ip: 需要连接的 MDX for Kylin 数据库服务器的 IP 地址或 Hostname insight.database.port: 需要连接的 MDX for Kylin 数据库的端口号 insight.database.name: 需要连接的 MDX for Kylin 数据库的名称 insight.database.username: 需要连接 MDX for Kylin 数据库的连接用户名 insight.database.password: 需要填入通过第四步加密以后的 MDX for Kylin 数据库管理员密码 insight.semantic.port: MDX for Kylin Semantic 的端口，设置后，使用该端口登陆 MDX for Kylin insight.semantic.datasource-version: 需要指明连接的 MDX for Kylin 版本，仅支持 2, 表示对接 Kylin insight.mdx.cluster.nodes: 需要将集群中所有 MDX for Kylin 节点的 ip 和 port 信息加入配置文件中, 例如insight.mdx.cluster.nodes=ip1:port1,ip2:port2 注意：若不设置 insight.mdx.cluster.nodes ，会导致无法在 UI 中生成诊断包。 更多高级配置可参考基本配置参数文档。 如果您有集群部署的需求，还请先阅读手册诊断包章节 启动 MDX for Kylin 启动 MDX for Kylin，首次启动会需要几分钟的时间来更新元数据 $ bin/mdx.sh start 注意：在首次启动时，由于未并未填写与 Kylin 通信的账户信息，所以同步任务会失败。详情如下图，此时您可正常登陆 MDX for Kylin 并填写同步信息，填写后即可正常同步。 安装成功后，您可以通过 http://{host}:{insight.semantic.port}/login/ 登陆 MDX for Kylin 由于 MDX for Kylin 需要与 Kylin 进行通信，所以首次启动时，登陆系统后，系统会提示您填写连接使用的用户名和密码 停止 MDX for Kylin $ bin/mdx.sh stop Powered by Gitbook.            Last Modified： 2022-03-30 18:30:19 "},"installation/MDX_cluster_installation.cn.html":{"url":"installation/MDX_cluster_installation.cn.html","title":"MDX 集群部署","keywords":"","body":"MDX 集群部署 MDX 实例安装配置 Nginx 安装配置 MDX 集群访问方式 注意事项 MDX 实例安装配置 从 Kyligence 提供的下载地址 下载 MDX for Kylin 安装包后，按照手册说明安装必要的组件、修改必要的配置参数，详细请参考在 Linux 环境安装。 集群部署时，为保证能够正常使用生成诊断包功能，需要在每一个 MDX 节点的 ${MDX_HOME}/conf/insight.properties 文件中添加配置项 insight.mdx.cluster.nodes=:,:，将集群中所有 MDX for Kylin 节点的 ip 和 port 信息加入配置文件中。 Nginx 安装配置 Nginx 安装请参考 Nginx 官网安装文档。由于 MDX for Kylin 根据自定义 header：x-Host 和 x-Port 以将请求转发到指定的节点上，以确保可以在页面上通知多个节点生成诊断包并下载，您需要在 Nginx 配置文件中添加路由规则。例如针对 Nginx 1.13.7 ，对两台机器上的 A、B 两个 MDX for Kylin 节点，其 ip 和 port 分别为 : 和 :，则需要在 Nginx 的配置文件中添加如下配置： # can be customized name upstream { server :; server :; } server { listen ; server_name ; #charset utf-8;(Recommended Use) #Enable customized header underscores_in_headers on; location / { if ($http_x_host = '') { #Requests without customized headers can be sent to any node #Here, needs to be consistent with the name after \"upstream\" proxy_pass http://; break; } #For requests containing customized headers, forward them to the specified node proxy_pass http://$http_x_host:$http_x_port;break; } } MDX for Kylin 集群访问方式 完成上述配置后，可以根据 Nginx 配置的 server_name 和 listen ， 页面上通过 http://:/login 来对 MDX for Kylin 集群进行访问，Excel 等BI 工具通过 http://:/mdx/xmla/ 来对 MDX for Kylin 集群上的某个名为 项目进行访问。 注意事项 以上内容中 {} 或 <> 应当根据实际使用情形，连同 {} 或 <> 一同替换为实际值。 多节点部署配置示例中 Nginx 配置为示例配置，具体的路由方式和过滤范围可根据实际需要进行调整。 如果多个 MDX for Kylin 节点的版本不一致，Nginx 转发后对 js 和 css 文件的读取可能存在问题，所以您必须保证各个节点的 MDX for Kylin 版本一致。 由于请求诊断包时使用配置文件中给出的 IP 和 Port 信息，请不要使用 localhost，可能会导致 Nginx 转发失败导致请求无法成功。 在云上环境使用时，为了让 Nginx 能正常转发请求，请将所有 MDX 示例安装在同一虚拟子网内。 Powered by Gitbook.            Last Modified： 2022-03-25 11:15:48 "},"installation/uninstall.cn.html":{"url":"installation/uninstall.cn.html","title":"卸载","keywords":"","body":"卸载 在本节中，我们将为您介绍卸载 MDX for Kylin 的步骤。 在所有 MDX for Kylin 节点上运行下述命令以停止 MDX for Kylin 实例： bin/mdx.sh stop 在所有 MDX for Kylin 节点上运行下述命令以删除工作目录： rm -rf 至此，MDX for Kylin 卸载完成。 Powered by Gitbook.            Last Modified： 2022-03-16 17:11:25 "},"overview/":{"url":"overview/","title":"概览","keywords":"","body":"概览 在概览界面中，您可以监控 MDX for Kylin 系统的情况，了解每个项目的核心数据、指标和系统状态，包括该项目服务的用户数量、数据集使用量、查询次数等信息。 在概览界面右上角，您可以筛选时间区间，默认展示最近 7 天的数据。这里设置的时间范围将会作用到当前界面的所有指标。 查询统计 在查询统计区域，您可以查看当前项目的以下信息： MDX 查询数：历史 MDX 查询总数； 人均查询次数：用户人均查询次数； MDX 失败查询数：历史 MDX 的失败查询总数； 平均查询时间：所有查询的平均响应时间； 活跃用户：查询过的用户数。 您可以点击标题旁的按钮来跳转到查询历史界面。 查询趋势 在查询趋势区域，您可以查看当前项目的以下信息： 查询数：近期查询次数的变化趋势； 失败查询数：近期失败查询次数的变化趋势； 平均查询时间：近期平均查询响应时间的变化趋势。 图表中默认展示五个数据集的信息，您也可以通过点击右上角的筛选按钮，来指定其他的数据集。 查询时间 在查询时间区域，展示了此项目中不同时长的查询数量变化趋势。查询时长分为 0~3 秒，3~10 秒，10~30 秒，30~60 秒和大于 60 秒。 排名 在排名区域中按照查询次数由多到少，展示了最常用和最不常用的数据集，未被查询过的数据集不展示。 Powered by Gitbook.            Last Modified： 2022-03-25 11:50:53 "},"dataset/":{"url":"dataset/","title":"数据集","keywords":"","body":"数据集 在本章中，将为您介绍如何创建和编辑数据集作为数据分析的数据源。 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/":{"url":"dataset/design_dataset/","title":"设计数据集","keywords":"","body":"设计数据集 欢迎使用设计数据集教程。 本教程将说明如何设计数据集。 内容概要 本教程主要包含如下内容： 填写基本信息 定义关系 定义语义 查看及编辑维度表 查看及编辑维度 查看及编辑度量 新增、查看及编辑层级结构 新增、查看及编辑命名集 新增、查看及编辑计算度量 定义翻译 定义维度用法 保存 YTD、QTD、MTD 使用说明 Powered by Gitbook.            Last Modified： 2022-03-18 16:40:33 "},"dataset/design_dataset/s1_basic_info.cn.html":{"url":"dataset/design_dataset/s1_basic_info.cn.html","title":"填写基本信息","keywords":"","body":"填写基本信息 此处将以产品自带的样例数据为例，介绍数据集的创建过程。 打开产品的 Web UI，点击数据集菜单，即可打开数据集列表 点击 + 数据集 按钮，即可新增数据集。我们创建一个新的数据集，命名为 kylin_sales_dataset 。 接着，您将进入数据集设计向导。在设计界面的上方，您可以看到当前所在的步骤。 您可以在此处填写数据集的名称。 下一步 定义关系 Powered by Gitbook.            Last Modified： 2022-03-18 16:51:07 "},"dataset/design_dataset/s2_relationship.cn.html":{"url":"dataset/design_dataset/s2_relationship.cn.html","title":"定义关系","keywords":"","body":"定义关系 进入步骤 2 后，您可以根据分析需要，设计需要加入数据集的模型，及定义模型之间的关系。 提示：您必须至少添加一个模型。 在添加第一个模型后，您可以继续添加模型，并定义模型之间的关系 提示：模型必须至少存在一对公共维度表 下一步 定义语义 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/s3_semantic.cn.html":{"url":"dataset/design_dataset/s3_semantic.cn.html","title":"定义语义","keywords":"","body":"定义语义 点击下一步后，就进入了定义语义步骤，该页左侧显示了各个模型中的维度和度量 在该页面您可以完成如下操作： 查看及编辑维度表 查看及编辑维度 查看及编辑度量 新增、查看及编辑层级结构 新增、查看及编辑命名集 新增、查看及编辑计算度量 下一步 查看及编辑维度表 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/s3_1_dimension_table.cn.html":{"url":"dataset/design_dataset/s3_1_dimension_table.cn.html","title":"查看及编辑维度表","keywords":"","body":"查看及编辑维度表 点击 维度表名称 ，您可以查看维表的属性 点击 编辑 按钮后，即可进入编辑页面，在该页面您可以更改维度表的类型及名称 下一步 查看及编辑维度 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/s3_2_dimension.cn.html":{"url":"dataset/design_dataset/s3_2_dimension.cn.html","title":"查看及编辑维度","keywords":"","body":"查看及编辑维度 点击 维度名称 ，您可以查看维度的属性。 维度属性介绍 MDX 系统提供了一些维度的属性设置选项，用于控制这些维度的表现。下面的表格列出了每个属性的含义。 注意：为了确保查询性能，请在 Kylin 创建聚合组时，把作为维度属性的维度加入聚合组。例如 Name Column、属性等。 维度属性 描述 Key Column 此维度对应的列，不可更改。 维度名称 维度的显示名称。 数据类型 维度对应的数据类型，不可更改。 类型 维度的属性。将维度设置为对应的时间属性后，可以用于时间相关的计算。例如计算 YTD，YOY 等。 Name Column Name Column 指定了在分析时展示的值。设置 Name Column 能提高客户端中分析展示的友好性。举例，将维度 Datekey （20120101）的 Name Column 设置为维度 Date_name（2012 年 1 月 1 日）。在使用维度 Datekey 分析时，报表中展示的值为 2012 年 1 月 1 日。Name Column 中的值必须仅与一个 Key Column 中的值对应，否则会引起 MDX 计算错误。 Value Column 定义了 Value Column 后，可以在计算度量的表达式中使用 MemberValue 来返回指定的列。对于日期相关的维度，可以将 Value Column 设置为日期类型的字段，便可以在客户端利用日期筛选器进行过滤，例如筛选去年、上周等。注意：为了查询结果的准确性，Value Column 中的值必须与 Key Column 中的值为一对一或一对多映射关系。 属性 设置了一个或多个维度为属性后，可以在 MDX 表达式中引用显示属性关系。注意：为了查询结果的准确性，属性中的值必须与 Key Column 中的值为一对一或一对多映射关系。 所属文件夹 用于定义维度所属的文件夹。若您需要多级文件夹，请使用 \\ 符号分隔。例如，为一个维度的所属文件夹填写文件夹1\\文件夹2，则此维度将会放置在文件夹2中，而文件夹2嵌套在文件夹1中。 可见 关闭可见后，所有用户都无法使用这个维度。这个选项将会同步到权限列表中。 默认成员 使用表达式来指定此维度返回的默认单个成员。此功能尚属于 BETA 阶段。 编辑维度 点击 编辑 按钮后，即可进入编辑页面，在该页面您可以更改维度名称、属性、Name Column 和 Value Column。 注意：维度中使用 Key Column, Name Column 和 Value Column 中的列仅支持 String, Int, Long, Double, Timestamp, Date, Boolean 类型 您可以在此处设置 Name Column。 注意：在 Name Column 为 none 时，使用 Name Column 相关的表达式时，会按照 Key Column 的内容处理； 您可以在此处设置 Value Column。 注意：在 Value Column 为 none 时，使用 Value Column 相关的表达式时，会按照 Name Column 的内容处理； 您可以在此处设置 Properties。 您可以在此处设置该维度所属的文件夹，若您需要多级文件夹，请使用 \\ 分隔。 注意：多级文件夹仅在 Excel 中生效。 其次您也可以设置该度量的默认成员 注意：该功能现处于 BETA 阶段，现在仅能将默认成员设置该维度的一个成员，例如 [Dates].[Year].&[2019] 默认成员行为说明 当层级中某个维度设置了默认成员，那么将层级放入在筛选器或者切片器时，默认值不会是默认成员。另外，将层级放入行列中时，将会进行默认成员的筛选。 当没有勾选任何默认成员的维度时，其他维度的展示将会受默认成员的筛选。 已知限制: 将设置了默认成员的维度放入透视表的筛选器后，筛选器界面上筛选状态为单选默认成员，但是下拉列表中将展示为全选。 若设置的默认成员不存在，可以正常保存，最终在 Excel 中等同于未设置默认成员。 最后，您可以设置维度在客户端应用中是否可见。 下一步 查看及编辑度量 Powered by Gitbook.            Last Modified： 2022-03-25 12:10:20 "},"dataset/design_dataset/s3_3_measure.cn.html":{"url":"dataset/design_dataset/s3_3_measure.cn.html","title":"查看及编辑度量","keywords":"","body":"查看及编辑度量 点击 度量名称 ，您可以查看度量的属性。 点击 编辑 按钮后，即可进入编辑页面，在该页面您可以更改度量名称、度量格式、设置文件夹和全局是否可见。 注意： 现在 MDX 仅支持 Kylin 中的 SUM、MIN、MAX、COUNT、COUNT_DISTINCT 度量。 现在仅支持 Kylin 中度量的返回类型为 String, Int, Long, Double。 度量格式是为了提高度量值的可读性，您可以为任何度量指定需要的格式，系统支持选择和配置预定义格式，如：数值、货币、百分比，也支持利用格式字符配置自定义格式。查看预定义度量格式和度量格式字符。 您可以在此处设置度量的度量格式： 【打开度量设置页面】 【预定义格式 - 数值】 【自定义格式】 您可以在此处设置度量所属的文件夹，若您需要多级文件夹，请使用 \\ 分隔。 注意：多级文件夹仅在 Excel 中生效。 同时，您可以设置度量在客户端应用中是否可见。 下一步 新增、查看及编辑层级结构 Powered by Gitbook.            Last Modified： 2022-03-25 12:12:05 "},"dataset/design_dataset/s3_4_hierarchy.cn.html":{"url":"dataset/design_dataset/s3_4_hierarchy.cn.html","title":"新增、查看及编辑层级结构","keywords":"","body":"层级结构 你可以在 MDX for Kylin 中创建层级结构。层级结构是基于维度的级别集合，可用于提高数据分析人员的分析能力。 例如，你可以创建一个时间层级结构，包含了年、季、月、周和日级别。这样分析人员在客户端中可以先逐年分析销售额，在需要时可以分别展开“季度 > 月 > 周 > 日”来进行更细粒度的分析。 新增、查看及编辑层级结构 点击 +层级结构 按钮，即可进入新增层级结构页面。 提示： 不可创建跨维度表的层级结构 在层级结构中添加维度时，请按照从粗到细的颗粒度来进行选择 点击 层级结构名称 ，您可以查看层级结构的属性。 点击 编辑 按钮后，即可进入编辑页面，在该页面您可以编辑层级结构。 设置权重 根据不同的业务分析需求，用户可能需要在层级结构中设置自定义上卷，即指定汇总成员值的方式。 在层级结构中，您可以对指定的层级指定（权重）字段。每当计算父级成员的值时，该权重字段就会与子级成员相乘。 权重字段一般为包含 -1 到 1 的值，例如 -1，-0.25、0、0.25、0.5、0.75、1 等值。 正数表示将值累加到父级，负数表示减去相应值，0 表示此子级不应用到父级。 用户可以对几乎所有层级结构使用自定义上卷。 下面用一个药房的例子来介绍这个功能。假设有一个药房的交易数据模型如下： 事实表 F_TRANS TRANS_ID PRODUCT_NAME PRICE 001 polyenes 33 002 5-HTP 84 003 Evening Primrose Oil 53 ... ... ... 维度表 D_MEDICINE 包含以下维度： CATEGORY：类别 SUB_CATEGORY：子类别 SUB2_CATEGORY：次级类别 PRODUCT_NAME：药品名称 及以上维度对应的权重列，一共 4 个 配置要求： 请将配置 insight.kylin.only.normal.dim.enable 设置为 false。 步骤 1：新建 MDX 数据集，并在维度表中创建层级结构如下。 步骤 2：在编辑层级结构时，点击设置权重的按钮，进入权重设置的弹窗界面。 弹窗内容如下，用户可以对每一个层级设置权重列。设置结束后，点击确定提交。 步骤 3：保存此数据集的改动后，连接 Excel 进行分析。在透视表中放置层级结构和度量 SUM(PRICE)，并展开层级结构，即可根据权重字段的值来进行自定义上卷计算。 已知限制 仅支持聚合方式为 SUM 的度量与设置了权重字段的层级结构进行自定义的上卷计算。 若需要筛选设置了权重字段的层级结构，可以在行标签或者列标签上进行筛选。若将此层级结构放入筛选器中，筛选的结果可能会不准确。 对于时间类型的维度表，考虑到时间智能类的分析与自定义的上卷计算可能会冲突，用户暂时无法在时间类型的维度表定义的层级结构上设置权重字段。 若在模型中，设置了权重字段的层级结构所在的维度表通过多个主键与事实表多对多连接，分析结果可能不准确。 若在同一个维度表中，存在多个层级结构，且引用了相同的权重字段。在报表中添加了多个这样的层级结构时，查询结果可能不准确。 下一步 新增、查看及编辑命名集 Powered by Gitbook.            Last Modified： 2022-03-18 20:57:40 "},"dataset/design_dataset/s3_5_namedset.cn.html":{"url":"dataset/design_dataset/s3_5_namedset.cn.html","title":"新增、查看及编辑命名集","keywords":"","body":"新增、查看及编辑命名集 介绍 在 MDX for Kylin 的使用中，经常会出现需要重复使用一组成员的需求，这种需求可以通过定义命名集来满足。命名集（NamedSet） 是根据指定的表达式 计算得到的一个成员Set，即一组成员的集合，命名集可以直接置于轴上用于展示，也可以在计算度量或其他命名集的表达式中使用。 备注 目前命名集功能支持的 BI 工具包括 Excel 和 Tableau。 目前仅支持成员Set，即一组成员的集合，不支持 Tuple Set，即一组 Tuple 的集合（每个 Tuple 由若干属于不同维度的成员组成）。 命名集中的所有成员必须属于同一层级维度。 操作步骤 点击 +命名集 按钮，即可进入新增命名集页面。 点击 命名集名称 ，您可以查看命名集的相关设置。 点击 编辑 按钮后，即可进入编辑页面，在该页面您可以编辑命名集。命名集的表达式支持 MDX 语言；命名集的所属位置 指示该命名集在 Excel 中将会出现在\"数据透视表字段\"列表的何处；命名集的可见性开关控制该命名集在 BI 工具中是否可见。 示例 在一个数据集中新建命名集，其表达式与上述操作步骤中的\"销售收入前五城市\"命名集。 在 Excel 中将新建的命名集置于行轴上，展示效果如下： 在 Tableau 中将新建的命名集置于行轴上，展示效果如下： 下一步 新增、查看及编辑计算度量 Powered by Gitbook.            Last Modified： 2022-03-18 21:08:13 "},"dataset/design_dataset/s3_6_calculated_measure.cn.html":{"url":"dataset/design_dataset/s3_6_calculated_measure.cn.html","title":"新增、查看及编辑计算度量","keywords":"","body":"新增、查看及编辑计算度量 点击 +计算度量 按钮，即可进入新增计算度量页面。 提示： 在此页面你可以设置计算度量的格式，格式处的下拉框既可以下拉选择，也可以人工填写 表达式处需要填写 MDX 的查询语句 点击 计算度量名称 ，您可以查看计算度量的属性。 点击 编辑 按钮后，即可进入编辑页面，在该页面您可以编辑计算度量。 您可以在此处设置该计算度量所属的文件夹，若您需要多级文件夹，请使用 \\ 分隔。 注意：多级文件夹仅在 Excel 中生效。 同时，您可以设置计算度量在客户端应用中是否可见。 下一步 定义翻译 Powered by Gitbook.            Last Modified： 2022-03-25 12:45:13 "},"dataset/design_dataset/s3_6_s1_non_empty_behavior.cn.html":{"url":"dataset/design_dataset/s3_6_s1_non_empty_behavior.cn.html","title":"非空行为","keywords":"","body":"非空行为 非空行为是一组用于解析 MDX 中非空查询的基础度量的名称集合。当此选项为空时，必须对计算度量进行计算以确定度量值。但如果此属性包含一个或多个基础度量的名称，并且在某个单元格上所有指定的基础度量值均为空，那么该单元格的计算度量值将被直接视为空，跳过计算步骤。 为什么要设置非空行为？ 非空行为是一个由用户指定的优化行为，使用该功能可提高包含计算度量的 NON EMPTY 查询性能。 如何设置非空行为？ 给对应的计算度量设置非空行为，需要执行以下三步： 在定义语义界面中，先找到对应的计算度量，点击编辑。 然后在计算度量表单下面，找到非空行为选择框，选择可能为空的一个或多个基本度量。 点击确定，保存该计算度量，可以在阅览界面中看到非空行为中有了选择的基本度量，最后保存数据集。 设置须知 目前为使单元格计算取得最佳性能，应尽可能只选一个成员，推荐不超过五个。 当 Kylin 模型发生变更后，在数据集中非空行为引用的基础度量若被删除，该数据集依旧可以连接，但数据集的状态会变成错误状态。该计算度量依旧可以正常使用，但被删除的基础度量不会产生任何影响。(当前版本进入数据集后，暂不会显式提示变更基础度量的计算度量。未来版本中将会有报错提示。) Powered by Gitbook.            Last Modified： 2022-03-18 21:57:39 "},"dataset/design_dataset/s3_6_s2_template.cn.html":{"url":"dataset/design_dataset/s3_6_s2_template.cn.html","title":"使用模板","keywords":"","body":"使用模板 使用模板就是指在编辑计算度量的时候，用户可以套用计算度量的模板，来快速生成复杂难写的表达式。 MDX系统在出厂时预定义了一些模板，用户也可以自定义一些常用的模板。 使用模板的目的 降低编辑计算度量的复杂度：让不会编写计算度量表达式、不熟悉MDX查询语法的用户也能定义出想要的计算度量。 降低表达式的编写错误：由于MDX语言体系较为复杂，撰写表达式难免容易写错。所以套用预先定义好正确的表达式模板，会减少计算度量定义错误的发生概率。 提高编辑计算度量的效率：用户可以预先定义好模板，减少重复编写相似且复杂的表达式，方便用户快速创建更多的常用计算度量。 快速浏览常用的模板指标：每个计算度量模板的描述都可以用户定义，且支持自定义翻译。用户仅需在列表中点选查看，就能明白其含义。 使用模板的方法 打开计算度量编辑界面，点击表达式右边使用模板按钮。 出现计算度量模板弹框，选择一个想要的模板。 在参数标签页上，选取所有必填的指标参数。 [可选]点击表达式标签页，查看表达式最终结果。 点击确定按钮，自动填入表达式。 出厂预定义的模板 MDX系统在出厂时内置了一套模板。他们分别是： ├── 默认模板 │ │ ├── 数学运算 │ │ ├── 加法：计算两个值之和。 │ │ ├── 减法：计算两个值之间的差值。 │ │ ├── 乘法：计算两个值的乘积。 │ │ ├── 除法：计算一个值与另一个值的比率。 │ │ │ ├── 时间智能 │ │ ├── 本年至今总计：计算从今年开始的度量或计算度量的总和。 │ │ ├── 本月至今总计：计算从本月开始的度量或计算度量的总和。 │ │ ├── 年同期增长率：计算度量或计算度量的年同期增长率。 │ │ ├── 月同期增长率：计算度量或计算度量的月同期增长率。 添加自定义计算度量模板 MDX系统提供用户自定义计算度量模板，该功能需要通过修改软件包中的配置文件indicators.json来实现。 在insight.properties同级目录下的indicators.json文件中，定义了一个JSON结构，往配置文件的list属性末尾添加计算度量模板JSON结构即可。 快速上手自定义模板 如图是在indicators.json中，增加一个自定义加法模板的例子。 不需重启MDX，可以立即在弹框中看到定义后的模板 样例代码，点击此处展开 注: `template`中的`${0}`代表指标A，`${1}`是指标B。 { \"name\": \"自定义加法\", \"template\": \"${0} + ${1}\", \"folder\": \"数学计算\", \"category\": \"calculateMeasure\", \"buildin\": false, \"description\": \"两个度量相加。\", \"params\": [ { \"name\": \"指标A\", \"accept\": [ \"measure\", \"calculateMeasure\" ], \"placeholder\": \"${指标一}\" }, { \"name\": \"指标B\", \"accept\": [ \"measure\", \"calculateMeasure\" ], \"placeholder\": \"${指标二}\" } ] } 计算度量模板JSON详解 添加模板时，需要注意每个计算度量模板JSON都用逗号分割，最后一个JSON末尾不需要加逗号。 { \"pageNum\": 0, \"pageSize\": 0, \"total\": 0, \"list\": [ ... // 其他模板 { \"name\": \"Month-over-month Change\", // 最后一个模板 \"template\": \"模板表达式\", \"buildin\": true, \"params\": [...] }, // 1. 此处添加逗号分割 { \"name\": \"新模板的名称\", // 2. 在这里添加自定义模板 \"template\": \"新模板的表达式\", ... } // 3. 最后一个模板末尾不要留逗号 ] } 计算度量模板JSON是使用计算度量模板的基础，有了JSON才可以定义模板。模板具体的含义如下： 注：[翻译]代表此处可被translation字段翻译，如果没有定义translation，则不进行翻译。 { \"name\": \"模板的名称 [可翻译]\", \"template\": \"模板的表达式：\\n代表换行，${N}代表第N个参数\", \"folder\": \"模板所属文件夹：可用'\\\\'进行分割，生成多层文件夹 [可翻译]\", \"category\": \"calculateMeasure\", // 默认参数 \"buildin\": false, // 代表是否内建模板 \"description\": \"模板的描述 [可翻译]\", // 参数列表 \"params\": [ { \"name\": \"参数的名称\", \"accept\": [ // 参数可支持的参数类型，可任意组合 \"column\", \"namedSet\", \"measure\", \"calculateMeasure\" \"hierarchy\", \"hierarchyLevel\" ], \"placeholder\": \"参数在表达式中占位符\" } ], // 以上为[必填]数据，以下为[选填]数据 // 翻译列表 \"translation\": { // 中文翻译列表 \"zh\": { \"name\": \"模板的名称\", \"folder\": \"模板所属文件夹\", \"description\": \"模板的描述\", \"params.0.name\": \"参数的名称\", \"params.0.placeholder\": \"参数在表达式中占位符\" }, // 英文翻译列表 \"en\": { \"name\": \"Template's name\", \"folder\": \"Template's folder\", \"description\": \"Template's description\", \"params.0.name\": \"Parameter's name\", \"params.0.placeholder\": \"Parameter's placeholder\" } } } 未来拓展 在目前看来，用户添加自定义计算度量模板可能略微复杂和繁琐，需要一定的学习成本。不过这对MDX未来发展是友好的，因为系统可以直接集成各种多样化复杂场景、模板文案翻译等。未来还有可能支持计算度量模板UI界面，通过UI界面来设计计算度量模板等更具体验的功能。 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/s3_6_s3_semi_additive_measure.cn.html":{"url":"dataset/design_dataset/s3_6_s3_semi_additive_measure.cn.html","title":"半累加度量","keywords":"","body":"半累加度量 在很多的数据分析场景中，半累加度量是很常见的，它可以用于处理证券、账户余额、人力资源等业务领域。比如在银行在使用账户交易记录数据来统计储蓄账户余额时，对于非时间维度，使用正常的求和，而对于时间维度，则需要取最后一条记录的值。 点击 +计算度量 按钮，即可进入新增计算度量页面，您可以增加半累加度量。 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/s3_7_measure_group.cn.html":{"url":"dataset/design_dataset/s3_7_measure_group.cn.html","title":"查看及编辑度量组","keywords":"","body":"查看及编辑度量组 在数据集中，度量值按照 Kylin 中的 Cube 进行分组，度量组用于使维度和度量值相互关联。 提示： Kylin 中的 Cube 形成一个 MDX 中的度量组 对于计算度量是单独的度量组 支持将计算度量移动到不同的度量组中 您可以在此处编辑度量组的名称 Powered by Gitbook.            Last Modified： 2022-03-25 18:12:41 "},"dataset/design_dataset/s3_8_del_objects.cn.html":{"url":"dataset/design_dataset/s3_8_del_objects.cn.html","title":"批量删除命名集/层级结构/计算度量","keywords":"","body":"批量删除命名集/层级结构/计算度量 当发生数据集变更时，如：将某一个模型替换为另一个不同名称的新模型，此时如果数据集中的命名集/计算度量，有使用到被替换模型中的维度/度量/计算度量，则会造成数据集中出现失效的命名集/计算度量。又如：删除 Kylin 中模型的维度，则使用到该维度创建的层级结构都会失效。 在这种情况下，失效的命名集/层级结构/计算度量数量可能会非常多，可以使用批量删除操作来对失效内容进行删除。 下例会同时删除失效的命名集和计算度量 模型和数据集： 模型 InternetSales_clone_Test 和模型 ResellerSales_clone_Test ，组成数据集 MyTestDataset 。其中含计算度量 cm1，使用模型 InternetSales_clone_Test 的度量、计算度量 cm2，使用模型 ResellerSales_clone_Test 的度量、命名集 N1。 变更操作： 用模型 InternetSales_clone_Test_NEW 替换数据集中的模型 InternetSales_clone_Test 计算度量和命名集失效： 计算度量 cm1 和命名集 N1失效： 批量删除操作： 点击上方的点此处理，在窗口中选择想要删除的计算度量和命名集，点击确定 再次确认删除 删除成功 保存数据集 Powered by Gitbook.            Last Modified： 2022-03-25 12:51:41 "},"dataset/design_dataset/s4_translate.cn.html":{"url":"dataset/design_dataset/s4_translate.cn.html","title":"定义翻译","keywords":"","body":"定义翻译 介绍 在 MDX for Kylin 中，您可以嵌入一个基于区域设置标识符 （LCID）来设置指定地域的信息来获取对应区域的语言设置，并展示对应数据集各项实体的名称 这项功能有助于国际化的团队分析同一份数据集，从而节省重复定义数据集的工作，同时也保证不同的团队使用的数据口径是统一的。 备注 目前仅支持中国、美国、英国三种语言设置。 目前可设置的实体为维表、维度、度量、计算度量和层级。如果某维度定义了翻译，那么包含该维度的层级也会使用翻译的名称。 如果分析应用客户端使用的语言没有在数据集定义，那么数据集将采用默认语言。如果您使用是 Excel，不同语言设置的 Excel 将会使用不同的 LCID，如果您使用的是 Tableau，将会使用 Windows 系统的 LCID，您可以尝试更改 Windows 机器的语言设置来改变 LCID。 在 MDX 表达式中引用维度，度量等实体时，请使用默认名称进行引用，而不要使用翻译的名称。 配置步骤 点击添加翻译语言的按钮； 在增加的一列中选择翻译对应的语言，并点击右侧的勾确定添加； 在新增的翻译语言中根据需求，可以设置对应维表、维度、度量名称等的翻译。 使用示例 为一个数据集定义两种语言设置，包含中文和英文(美国)。 使用中文语言设置的 Excel 打开，展示如下： 使用英文语言设置的 Excel 打开，展示如下： 提示：可以在 Excel 中的 选项 - 语言 修改默认语言 下一步 定义维度用法 Powered by Gitbook.            Last Modified： 2022-03-18 21:17:37 "},"dataset/design_dataset/s5_dimension_usage.cn.html":{"url":"dataset/design_dataset/s5_dimension_usage.cn.html","title":"定义维度用法","keywords":"","body":"定义维度用法 该页面将会列出所有的维度表和模型，该页面用于查看和编辑各个模型中维度表和该模型中的度量值之间的维度关系。 若模型中不包含该维度表，系统将显示 无法关联 。 对于不是无法关联的关系，点击 编辑 按钮您可以编辑其关系类型。 可选择的维度用法共有两种： 常规：表示该维度表直接连接到该模型的度量值。 多对多：当前 Kylin 暂不支持多对多关系。 下一步 保存 Powered by Gitbook.            Last Modified： 2022-03-25 14:34:43 "},"dataset/design_dataset/save.cn.html":{"url":"dataset/design_dataset/save.cn.html","title":"保存","keywords":"","body":"保存并创建 完成这些操作后，点击保存并创建，即完成了数据集的设计，您可以在数据集列表中查看它。 下一步 YTD、QTD、MTD 使用说明 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/design_dataset/s8_xtd.cn.html":{"url":"dataset/design_dataset/s8_xtd.cn.html","title":"YTD、QTD、MTD 使用说明","keywords":"","body":"YTD、QTD、MTD 使用说明 将时间维表定义为 time 类型。 创建一个包含年月日的 Hierarchy 命名为 Date-Hierarchy。需要注意： 针对每个层级，依次设置相应的日期维度属性，例如对于层级中的 年 维度，需要设置此维度的属性为年。 创建 CM，格式如下: YTD : SUM(YTD([DATE_DIM].[Date-Hierarchy].CurrentMember), [Measures].[XXX]) MTD : SUM(MTD([DATE_DIM].[Date-Hierarchy].CurrentMember), [Measures].[XXX]) Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/access_list.cn.html":{"url":"dataset/access_list.cn.html","title":"配置权限列表","keywords":"","body":"配置权限列表 创建数据集后，可以配置数据集的权限列表。用户可以在此进行对维度、度量、计算度量和命名集等进行权限列表设置。 通过以下步骤来设置权限列表： 在数据集列表中，点击指定数据集右侧的权限按钮，进入权限配置的界面。 选择在维度、度量、计算度量或者命名集的分页页面，点击 + 授权访问 按钮。 出现一个弹窗，在弹窗顶部选中进行权限配置的用户，用户组或者角色，关于如何创建数据集角色，您可以参考数据集角色章节，关于用户和用户组的权限生效机制，请参考实体安全性。 在弹窗内左侧的导航栏中进行模型、表的切换，在右侧可以看到表内的维度或者是模型内的度量、计算度量、命名集。 点击维度、度量或者计算度量前方的眼睛标志，当该标志上有一条斜线，代表对应的维度/度量/计算度量/命名集将会对被设置的用户，用户组或者角色不可访问。 再次点击眼睛标志，则可以去掉可见性限制，使得用户可以访问。 点击提交按钮。 保存成功的权限列表会出现在如下的表格中，用户可以点击表格右侧的删除按钮来删除权限列表，或者点击编辑按钮来再次编辑权限列表。 请参见实体访问安全性了解实体访问的产品设计。 Powered by Gitbook.            Last Modified： 2022-03-25 14:37:37 "},"dataset/import_export.cn.html":{"url":"dataset/import_export.cn.html","title":"数据集导入导出","keywords":"","body":"数据集导入导出 导出数据集 导入数据集 导出数据集 导出单个数据集 进入数据集页面，在单个数据集的操作列中，点击 省略号->导出，即可导出该数据集对应的 ZIP 文件。 导出多个数据集 进入数据集页面，点击导出数据集，在列表中勾选想要导出的数据集（可以先对数据集名称进行模糊搜索），点击导出，即可导出所有的数据集对应的 ZIP 文件。 导入数据集 进入数据集页面，点击导入数据集，选择数据集的 ZIP 文件，点击解析： 当解析成功之后，会弹出窗口，选择操作方式、是否导入权限，点击导入，完成导入。 关于新建/覆盖/不导入三种操作的说明 新建 当目标项目中不存在和源数据集名称相同的数据集，则默认是新建操作，操作列的默认下拉选项是新建。 覆盖 当目标项目中存在和源数据集名称相同的数据集，则默认是覆盖操作，操作列的默认下拉选项是覆盖。 不导入 在任何情况下，用户可以选择不导入。 关于导入时数据集的信息显示 系统会根据不同的操作，在右侧显示对应的信息。 新建 显示新数据集中的模型名称、模型之间的关联关系： 覆盖 源数据集和目标数据集完全一致 两个数据集完全一致的定义：模型名称、模型之间的关联关系、命名集、计算度量、模型下的维表/维度/度量、翻译（精确到每一种翻译语言下，对每一个对象的翻译内容）和维度用法都一致。 源数据集和目标数据集不完全一致 系统会显示源数据集相对目标数据集，增加的对象（如：模型、度量、计算度量），也会显示被删除的对象（如：模型、度量、计算度量）。另外，当翻译或维度用法有不一致时，系统会做文字提示，但不列出详细差异。 不导入 备注 支持跨环境（如从开发环境向生产环境）和跨项目导出/导入数据集 支持导入老版本中导出的 JSON 数据集文件 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/rename_dataset_cn.html":{"url":"dataset/rename_dataset_cn.html","title":"重命名数据集","keywords":"","body":"重命名数据集 进入数据集页面，在单个数据集的操作列中，点击 省略号->重命名： 输入符合名称规则的新名称，点击确定： 完成重命名： Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"dataset/mdx_list.cn.html":{"url":"dataset/mdx_list.cn.html","title":"MDX 函数列表","keywords":"","body":"MDX 函数列表 MDX 数据类型 MDX 函数列表 时间智能函数说明 MDX 数据类型 MDX 数据类型包含标量类型和非标量类型（元素类型），如下： 标量类型 Integer，整数，表达式如 1，3 * 7，CInt(1.2) Numeric，实数，表达式如 1.0，2 + 3.5，SUM([Date].AllMembers, [Measures].[Count]) * 5 Boolean，TRUE 或 FALSE，表达式如 TRUE，\"hello\" <> \"world\"，SUM([Date].AllMembers, [Measures].[Count]) String，字符串，表达式如 \"MDX Expression\"，\"hello\" || \"world\" 非标量类型 Member，MDX成员，表达式如 [Date].[Year].&[Y2019]，[Date].CurrentMember Tuple，MDX元组，由多个不同维度的 MDX 成员组合而成，表达式如 ([Date].[Year].&[Y2019]，[Country].CurrentMember) Set，MDX集合，MDX 成员的集合或者 MDX 元组的集合，表达式如 [Date].AllMembers，CrossJoin([Date].Members, [Country].Members) Dimension，数据集中的维度表，如 [Date]，[Country] Hierarchy，数据集中的层级，如 [Date].[Time-Hierarchy] Level，数据集中的层级中某一级别，如 [Date].[Time-Hierarchy].[Year]，[Date].[Time-Hierarchy].[Month] MDX 函数列表 以下清单是当前版本中支持的 MDX 函数列表： 提示 : 函数语法格式为 `: [ ,...] 表示包含0个或多个相同类型的 MDX 表达式，以逗号分隔 函数名称 描述与使用 () 构造一个元组。:([,...])([Date].[Day].&[1917-02-09],[Product].[Color].&[Blue]) {} 构造一个集合。:{[,...]}:{[,...]}示例1：{[Customer].[BirthDate].&[1917-02-09]}示例2：{[Customer].[BirthDate].[BirthDate].Members}示例3：{([Customer].[BirthDate].&[1917-02-09],[Product].[Color].&[Blue])} * 两个数字相乘。: * [Measures].[Count]*5 * 返回两组的叉积，等同于CrossJoin。: * : * : * : * 示例1：{[Customer].[BirthDate].[BirthDate].Members}*{[Customer].[Education].[Education].Members}示例2：{[Customer].[BirthDate].&[1917-02-19]}*{[Customer].[Education].[Education].Members}示例3：{[Customer].[BirthDate].[BirthDate].Members}*{[Customer].[Education].&[Bachelors]}示例4：{[Customer].[BirthDate].&[1917-02-19]}*{[Customer].[Education].&[Bachelors]} + 两个数字相加。:+[Measures].[Count]+2 - 两个数字相减。:-[Measures].[Count]-2 - 返回数字的负值。:--[Measures].[Count] / 两个数字相除。:/示例1：2/1示例2：[Measures].[Count]/5 返回表达式是否小于另一个表达式。::示例1：[Measures].[A]示例2：'kylin' 返回表达式是否小于或等于另一个表达式。::示例1：[Measures].[A]示例2：'kylin' <> 返回两个表达式是否不相等:<>:<>示例1：[Measures].[A]示例2：'kylin' = 返回两个表达式是否相等。:=:=示例1：1=2示例2：'kylin'='kylingence' > 返回表达式是否大于另一个表达式。:>1>2 >= 返回表达式是否大于或等于另一个表达式。:>=1>=2 AND 返回两个逻辑表达式的与值。:AND([Measures].[Count]>10000)AND(1=2) Abs 返回数字的绝对值:Abs()Abs(200.1-300) Acos 返回数字的反余弦。:Acos()Acos(0.540302)+acos(-1.000000) Acosh 返回数字的反双曲余弦值。:Acosh()Acosh(1)+Acosh(10) Aggregate 根据查询的上下文，聚合MDX集合的值。:Aggregate():Aggregate(,)示例1：Aggregate({[Date].[CalendarYear].[2014],[Date].[CalendarYear].[2013]})示例2：Aggregate({[Date].[CalendarYear].[2014],[Date].[CalendarYear].[2013]},[Measures].[Count]) AllMembers 返回包含指定维度的所有成员（包括计算成员）的集合。:.AllMembers:.AllMembers:.AllMembers示例1：[Date].[CalendarSemester].[CalendarSemester].Allmembers示例2：[InternetDueDate].[DueFiscalDate-Hierarchy].Allmembers示例3：[InternetDueDate].[DueFiscalDate-Hierarchy].[FiscalYear].Allmembers Asc 返回字符串中第一个字符的Ascii码。:Asc()Asc(\"kylingence\") AscB 别名Asc函数。:AscB()AscB(\"kylingence\") AscW 别名Asc函数。:AscW()AscW(\"kylingence\") Ascendants 返回指定成员的祖先成员集合。:Ascendants()Ascendants([Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2013].&[1].&[1]) Asin 返回数字的反正弦。:Asin()Asin(-0.5) Asinh 返回数字的反双曲正弦值。:Asinh()Asinh(-5) Atan2 返回指定的x坐标和y坐标的反正切。:Atan2(,)Atan2(-7,7) Atanh 返回数字的反双曲正切值。:Atanh()Atanh(0.76159416) Atn 返回指定数字的反正切值。:Atn()Atn(90) Avg 返回在集合上计算的数值表达式的平均值。:Avg()Avg(,)示例1：Avg({[Date].[CalendarQuarter].[CalendarQuarter].members})示例2：Avg({[Date].[CalendarQuarter].[CalendarQuarter].members},[Measures].[Count]) BottomPercent BottomPercent函数计算指定数值表达式对指定集求得的总和，并按升序对集进行排序。然后，该函数返回合计值累积百分比至少达到指定百分比的最小值元素。该函数返回累积合计至少达到指定百分比的最小子集。:BottomPercent(,,)BottomPercent({[Product].[Color].[Color].members},60,[Measures].[Count]) BottomSum 对集合进行排序并返回其中累计总数至少为指定值的底部N个元素。:BottomSum(,,)BottomSum({[Product].[Color].[Color].members},5220,[Measures].[Count]) CBool 返回已转换为子类型Boolean的Variant的表达式。:CBool()CBool(100) CDate 返回已转换为子类型DateTime的Variant的表达式。:CDate()CDate(\"2020-07-2517:44:10\") CDbl 返回已转换为子类型Numeric的Variant的表达式。:CDbl()CDbl(234.121231231) CInt 返回已转换为子类型Integer的Variant的表达式。:CInt()CInt(234.121231231) Cache 缓存MDX表达式结果Cache(>)Cache([Measures].[Count]) Caption 返回标题。:.Caption:.Caption:.Caption:.Caption示例1：[Customer].[EmailAddress].Caption示例2：[Date].[DueCalendarDate-Hierarchy].Caption示例3：[Date].[DueCalendarDate-Hierarchy].[CalendarYear].Caption示例4：[Product].[Class].&[M].caption Cast 将值转换为另一种类型。:Cast(AS)Cast(1+2ASSTRING) Children 返回成员的子级。:.Children[Date].[DueCalendarDate-Hierarchy].[CalendarYear].&[2010].children Chr 返回包含与指定字符代码关联的字符的字符串。:Chr()chr(48) ChrB 别名Chr函数:ChrB()ChrB(48) ChrW 别名Chr函数:ChrW()ChrW(48) ClosingPeriod 返回某个级别成员的最后一个后代。:ClosingPeriod():ClosingPeriod():ClosingPeriod(,):ClosingPeriod()示例1：[Customer].[person-Hierarchy].[Education].closingperiod示例2：ClosingPeriod([Date].[DueFiscalDate-Hierarchy].[FiscalYear])示例3：ClosingPeriod([Date].[DueFiscalDate-Hierarchy].[FiscalYear],[Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2010])示例4：ClosingPeriod([Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2010]) CoalesceEmpty 将空单元格值合并为不同的值。所有表达式必须是相同的类型（数字或字符串）。CoalesceEmpty([,...])CoalesceEmpty(88) Correlation 返回在集合上计算的两个序列的相关性。:Correlation(,):Correlation(,,)示例1：Correlation({[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]},[Measures].[Count])示例2：Correlation({[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]},[Measures].[SalesAmout],[Measures].[Count]) Cos 返回指定角度余弦值。:Cos()Cos(60*Pi()/180) Cosh 返回数字的双曲余弦值。:Cosh()Cosh(4) Count 除非使用可选的EXCLUDEEMPTY标志，否则返回集合中的元组数，包括空单元格。:Count():Count(,)示例1：Count({[InternetProduct].[COLOR].[COLOR].members})示例2：Count({[InternetProduct].[COLOR].[COLOR].members},EXCLUDEEMPTY) Count 返回包含空单元格的集合中的元组数。:.Count[Product].[Class].[Class].members.Count Covariance 返回在集合（有偏差）上计算的两个序列的协方差。:Covariance(,):Covariance(,,)示例1：Covariance([Product].[Class].[Class].Members,[Measures].[ProductStandardCost])示例2：Covariance([Product].[Class].[Class].Members,[Measures].[ProductStandardCost],[Measures].[Freight]) CovarianceN 返回在集合（无偏）上评估的两个序列的协方差。:CovarianceN(,):CovarianceN(,,)示例1：Covariancen([Product].[Class].[Class].Members,[Measures].[ProductStandardCost])示例2：Covariancen([Product].[Class].[Class].Members,[Measures].[ProductStandardCost],[Measures].[Freight]) Crossjoin 返回两个集合的叉积。:Crossjoin(,)Crossjoin([Product].[Color].[Color].members,[Product].[Size].[Size].members) CurrentDateMember 以format参数指定的格式返回与当前日期对应的指定维度内的确切成员。如果没有这样的日期，则返回NULL成员。格式字符串与MDX格式函数使用的相同，即VisualBasic格式字符串。:CurrentDateMember(,)CurrentDateMember([Date].[Calendar-Hierarchy],'yyyymmdd') CurrentDateMember 以format参数指定的格式返回与当前日期对应的指定维度内的最近或确切成员。格式字符串与MDX格式函数使用的相同，即VisualBasic格式字符串。:CurrentDateMember(,,)CurrentDateMember(Date].[OrderFiscalDate-Hierarchy],\"20050402\",BEFORE) CurrentDateString 返回format参数指定格式的当前日期。:CurrentDateString()CurrentDateString('yyyymmdd') CurrentMember 在迭代期间返回维度中的当前成员。:.CurrentMember[Product].[Class].CurrentMember CurrentMember 在迭代期间返回层次结构中的当前成员。:.CurrentMember[Date].[OrderFiscalDate-Hierarchy].CurrentMember DDB 返回使用双倍余额递减法或您指定的其他方法指定特定时间段内资产的折旧。:DDB(,,,,)DDB(24000,3000,10,2,1.5) DataMember 返回与维度的非叶成员关联的系统生成的数据成员。:.DataMember[Customer].[CustomerKey].&[11001].DataMember Date 返回包含当前系统日期的日期。:Date()Date() DateAdd 返回一个日期，其中包含已添加指定时间间隔的日期。:DateAdd(,,)示例1：DateAdd(\"h\",1,date())示例2：DateAdd(\"h\",1,[DUEDATE].[DateKey].&[2011-11-23]) DateDiff 返回指定两个指定日期之间的时间间隔数。:DateDiff(,,,,)String类型有：yyyy,q,m,y,d,ww,w,hh,n,s,ms,mcs,ns字段4指定一周的第一天。如果未指定，则假定为星期日。字段5指定一年的第一周。如果未指定，则第一周假定为1月1日所在的一周。示例1：DateDiff(\"yyyy\",Date(),Date())示例2：DateDiff(\"yyyy\",[Date].[DateKey].&[2011-11-23],[Date].[DateKey].&[2012-11-24])示例3：DateDiff(\"yyyy\",Date(),Date(),1)示例4：DateDiff(\"yyyy\",Date(),Date(),1,1) DatePart 返回包含给定日期的指定部分的整数。:DatePart(,,,)字段3指定一周的第一天。如果未指定，则假定为星期日。字段4指定一年的第一周。如果未指定，则第一周假定为1月1日所在的一周。示例1：DatePart(\"yyyy\",[Date].[DateKey].&[2011-11-23])示例2：DatePart(\"yyyy\",[Date].[DateKey].&[2011-11-23],1)示例3：DatePart(\"yyyy\",[Date].[DateKey].&[2011-11-23],1,1) DateSerial 返回指定年，月和日的日期。:DateSerial(,,)DateSerial(2020,3,5) DateValue 返回Variant(Date)。:DateValue()DateValue(CDate('2020-08-27')) Day 返回1到31之间的整数，包括1和31，表示月中的某天。:Day()Day(CDate('2010-09-23')) DefaultMember 返回对象的默认成员。:.DefaultMember:.DefaultMember示例1：[Product].[Class].DefaultMember示例2：[Date].[OrderFiscalDate-Hierarchy].DefaultMember Degrees 将弧度转换为度数。:Degrees()Degrees(0.5*Pi()) Descendants 返回指定级别的成员的后代集合，可选地包括或排除其他级别中的后代。:Descendants():Descendants(,):Descendants(,,):Descendants(,):Descendants(,,):Descendants(,,)示例1：Descendants([Date].[DueCalendarDate-Hierarchy].[CalendarYear].&[2010])示例2：Descendants([Date].[DueCalendarDate-Hierarchy].[CalendarYear].&[2010],[Date].[DueCalendarDate-Hierarchy].[DateKey])示例3：Descendants([Date].[DueCalendarDate-Hierarchy].[CalendarYear].&[2010],[Date].[DueCalendarDate-Hierarchy].[CalendarYear],SELF) Dimension 返回包含指定对象的维度。:.Dimension:.Dimension:.Dimension:.Dimension示例1：[Date].[CalendarYear].[CalendarYear].Dimension示例2：[Date].[DueCalendarDate-Hierarchy].Dimension示例3：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].Dimension示例4：[Date].[CalendarYear].&[2010].Dimension Dimensions 返回多维数据集中从零开始的位置由数值表达式指定的维。:Dimensions()Dimensions(2) Dimensions 返回由字符串指定名称的维度。:Dimensions()Dimensions('[Customer].[AddressLine]') Distinct 消除集合中的重复元组。:Distinct()Distinct({[Date].[FiscalYear].&[2005],[Date].[FiscalYear].&[2005],[Date].[FiscalYear].&[2006]}) DrilldownLevel 将指定级别的集合成员向下钻取到下一级，或者向下钻取集合中的指定维度。根据多级别分层数据结构，你可显式选择要深化的级别。有两种独占方式可指定级别。第一种方法是使用返回级别的MDX表达式来设置level_expression参数，另一种方法是指定索引参数，使用数值表达式指定级别的按数字。:DrilldownLevel():DrilldownLevel(,):DrilldownLevel(,,):DrilldownLevel():DrilldownLevel(,):DrilldownLevel(,,)表达式2是设置Level_expression参数方式表达式3是指定索引参数方式示例1：DrillDownLevel([Date].[DueCalendarDate-Hierarchy].[CalendarQuarter].Members)示例2：DrilldownLevel([Date].[DueCalendarDate-Hierarchy].[CalendarQuarter].Members,[Date].[DueCalendarDate-Hierarchy].[EnglishMonthName])示例3：DrilldownLevel([Date].[DueCalendarDate-Hierarchy].[CalendarYear].Members,,1) DrilldownMember 向下钻取第二个指定集合中存在的集合中的成员。指定了RECURSIVE，则函数将继续以递归方式将结果集的成员与第二个集的成员进行递归比较，并为结果集中每个成员检索每个成员的子成员:DrilldownMember(,)DrilldownMember(,,)示例1：DrillDownMember([Date].[DueFiscalDate-Hierarchy].Members,[Date].[DueCalendarDate-Hierarchy].Members)示例2：DrilldownMember([Date].[DueFiscalDate-Hierarchy].Members,[Date].[DueCalendarDate-Hierarchy].Members,RECURSIVE) Except 找出两组之间的差异，可选择保留重复项。如果指定ALL，则函数将保留在第一组中发现的重复项;在第二个集中找到的重复项仍将被删除。:Except(,):Except(,,)Symbol类型：ALLExcept({[Date].[CalendarYear].&[2005],[Date].[CalendarYear].&[2006]},{[Date].[CalendarYear].&[2005]}) Exclude 限定度量计算的详细级别，例如表达式为Exclude([Product],[Measures].[Qty])，表示计算[Measures].[Qty]时不受维度表[Product]中的维度的筛选条件影响。:Exclude([|,...])Exclude([Date].[DueFiscalDate-Hierarchy],[Measures].[Count]) Exists 返回与第二组的一个或多个元组一起存在的第一组元组的集合。:Exists(,)Exists({[Customer].[Education].&[Bachelors]},{[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]}) Exp 返回指定e（自然对数的基数）的幂。Exp()[Measures].[Count]*exp(1) Extract 从提取的维度元素返回一组元组，与Crossjoin相反。:Extract(,[,...])Extract([Customer].[Education].[Education].Members*{[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2013]},[Customer].[Education]) FV 返回指定基于定期，固定付款和固定利率的年金的未来价值。:FV(,,,,)字段1为每期利率，字段2为年金付款总期数，字段3为每期付款数字段4为一系列付款的现值，如果省略,则假定为0。字段5用于指定付款到期时间的Variant。如果付款期结束时付款到期,则使用0,或者在期初付款到期时使用1。如果省略,则假定为0。示例1：FV(0.12,4,10000)示例2：FV(0.01,48,1000,1)示例3：FV(0.01,48,1000,1,1) Filter 返回根据搜索条件过滤集合而得到的集合。:Filter(,)Filter([Customer].[CustomerKey].[CustomerKey].Members,[Measures].[Count]>6) FirstChild 返回成员的第一个子节点。:.FirstChild[Date].[DueCalendarDate-Hierarchy].[CalendarYear].&[2013].FirstChild FirstQ 返回在集合上计算的数值表达式的第一个四分位数值。:FirstQ():FirstQ(,)FirstQ([Date].[CalendarYear].[CalendarYear].Members,[Measures].[SalesAmout]) FirstSibling 返回成员父级的第一个子级。:.FirstSibling[Date].[CalendarYear].&[2009].FirstSibling Fix 返回数字的整数部分。如果为负数，则返回大于或等于该数字的负数。:Fix()[Measures].[Count]*fix(1.3) Fixed 限定度量计算的详细级别，例如表达式为Fixed([Product],[Measures].[Qty])，表示计算[Measures].[Qty]时忽略[Product]以外任何维度表中的维度的筛选。:Fixed([|,...])Fixed([Product].[Class].[Class],[Measures].[Count]) Format 格式化字符串的数字或日期。:Format(,):Format(,):Format(,)format([Measures].[Count],\"#,##0.00\") FormatCurrency 使用系统控制面板中定义的货币符号返回格式为货币值的表达式。:FormatCurrency(,,,,)字段1为需要被格式化的表达式。字段2为小数点右侧显示位数的数值。字段3指示是否显示小数值的前导零。默认值为-1。字段4指示是否将负值置于括号中。字段5指示是否使用计算机区域设置中指定的数字分组符号将数字分组。-2=TristateUseDefault-使用计算机区域设置中的设置。-1=TristateTrue-True0=TristateFalse-False示例1：FormatCurrency([Measures].[Unitprice])示例2：FormatCurrency([Measures].[Unitprice],2)示例3：FormatCurrency([Measures].[Unitprice],2,-1)示例4：FormatCurrency([Measures].[Unitprice],2,-1,-2)示例5：FormatCurrency([Measures].[Unitprice],2,-1,-2,-1) FormatDateTime 返回格式化为日期或时间的表达式。:FormatDateTime(,)示例1：FormatDateTime(Date())示例2：FormatDateTime(Date(),2) FormatNumber 返回格式为数字的表达式。:FormatNumber(,,,,)字段1为需要被格式化的表达式。字段2为小数点右侧显示位数的数值。默认值为-1（使用的是计算机的区域设置）。字段3指示是否显示小数值的前导零。字段4指示是否将负值置于括号中。字段5指示是否使用计算机区域设置中指定的数字分组符号将数字分组。-2=TristateUseDefault-使用计算机区域设置中的设置。-1=TristateTrue-True0=TristateFalse-False示例1：FormatNumber([Measures].[Freight])示例2：FormatNumber([Measures].[Freight],2)示例3：FormatNumber([Measures].[Unitprice],2,-1)示例4：FormatNumber([Measures].[Unitprice],2,-1,-2)示例5：FormatNumber([Measures].[Unitprice],2,-1,-2,-1) FormatPercent 返回格式为百分比（乘以100）的表达式，其尾部为％字符。:FormatPercent(,,,,)字段1为需要被格式化的表达式。字段2为小数点右侧显示位数的数值。字段3指示是否显示小数值的前导零。字段4指示是否将负值置于括号中。默认值为-1。字段5指示是否使用计算机区域设置中指定的数字分组符号将数字分组。-2=TristateUseDefault-使用计算机区域设置中的设置。-1=TristateTrue-True0=TristateFalse-False示例1：FormatPercent([Measures].[Count]/60398)示例2：FormatPercent([Measures].[Count]/60398,2)示例3：FormatPercent([Measures].[Count]/61000,2,-1)示例4：FormatPercent([Measures].[Count]/61000,2,-1,-2)示例5：FormatPercent([Measures].[Count]/61000,2,-1,-2,-1) Generate 将一个集合应用于另一个集合的每个成员，并通过union连接生成的集合。如果指定ALL，则函数将在结果集中保留重复项。:Generate(,):Generate(,,)Symbol类型：ALLGenerate([Date].[CalendarYear].[CalendarYear].Members,TopCount([Date].[CalendarYear].CurrentMember*[Product].[ProductLine].[ProductLine].Members,3,[Measures].[SalesAmout)) Generate 将一个集合应用于字符串表达式，并通过字符串连接来连接结果集。:Generate(,):Generate(,,)示例1：Generate([Date].[CalendarYear].[CalendarYear].Members\"AND\")示例2：Generate([Date].[CalendarYear].[CalendarYear].Members,[Date].[CalendarYear].CurrentMember.Name,\"AND\") Head 返回集合中第一个指定数量的元素。:Head():Head(,)示例1：Head([Customer].[CustomerKey].[CustomerKey].Members)示例2：Head([Customer].[CustomerKey].[CustomerKey].Members,3) Hex 返回表示数字的十六进制值的字符串。:Hex()Hex([Measures].[Count]) Hierarchize 在层次结构中对集合的成员进行排序。如果指定了post，Hierarchize函数将使用后自然顺序对级别中的成员进行排序。也就是说，子成员优先于他们的父级。:Hierarchize():Hierarchize(,)Symbol类型：POSTHierarchize({[Customer].[Education].&[HighSchool],[Customer].[Education].&[Bachelors]}) Hierarchy 返回对象的层次结构。:.Hierarchy:.Hierarchy示例1：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].Hierarchy示例2：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2010].Hierarchy Hour 返回0到23之间的整数，包括0和23，表示一天中的小时。:Hour()Hour(Cdate('2020-08-1209:30:45')) IIf 返回由逻辑测试确定的两个对象之一。:IIf(,,):IIf(,,):IIf(,,):IIf(,,):IIf(,,):IIf(,,):IIf(,,):IIf(,,):IIf(,,)示例1：IIF([Measures].[Count]>80000,([Customer].[Education].&[Bachelors],[Date].[CalendarYear].&[2011]),([Customer].[Education].&[HighSchool],[Date].[CalendarYear].&[2011]))示例2：IIF([Measures].[Count]>80000,[Customer].[CustomerKey],[Customer].[FirstName])示例3：IIF([Measures].[Count]>80000,[Date].[DueFiscalDate-Hierarchy],[Customer].[person-Hierarchy])示例4：IIF([Measures].[Count]>80000,[Date].[DueFiscalDate-Hierarchy].[FiscalYear],Date].[DueFiscalDate-Hierarchy].[DateKey])示例5：IIF([Measures].[Count]>80000,[Measures].[SalesAmout][Measures].[SalesAmout]>10000)示例6：IIF([Measures].[Count]>80000,[Customer].[Education].[Bachelors],[Customer].[Education].&[HighSchool])示例7：IIF([Measures].[Count]>80000,[Measures].[Unitprice]/3,[Measures].[Unitprice]/4)示例8：IIF([Measures].[Count]>80000,{[Customer].[Education].&[Bachelors]},{[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]})示例9：IIF([Measures].[SalesAmout]>10000,\"SalesAreHigh\",\"SalesAreLow\") IPmt 返回指定基于定期固定付款和固定利率的特定年金期间的利息支付。:IPmt(,,,,,)字段1为利率。字段2为计算其利息数额的期数。字段3为该项投资的付款期总数。字段4为现值，即本金。字段5为未来值，或在最后一次付款后希望得到的现金余额。字段6为数字0或1，用以指定各期的付款时间是在期初还是期末。（默认为0）示例1：IPmt(0.12,1,3,80000)示例2：IPmt(0.01,1,36,80000,50000)示例3：IPmt(0.01,1,36,80000,50000,1) IS 返回两个对象是否相同。:IS:IS:IS:IS:IS示例1：[Customer].[Education].&[Bachelors] IS [Customer].[Education].&[Bachelors]示例2：[Date].[DueFiscalDate-Hierarchy].[FiscalYear] IS [Date].[DueFiscalDate-Hierarchy].[DateKey]示例3：[Date].[DueFiscalDate-Hierarchy] IS [Date].[DueCalendarDate-Hierarchy]示例4：[Customer].[BirthDate] IS [Customer].[BirthDate]示例5：([Customer].[BirthDate],[Customer].[AddressLine]) IS ([Customer].[BirthDate],[Customer].[AddressLine]) IS EMPTY 确定表达式是否计算为空单元格值。:IS EMPTY:IS EMPTY示例1：[Customer].[Education].&[PrimarySchool] IS EMPTY示例2：([Customer].[AddressLine],[Date].[CalendarQuarter])IS EMPTY IS NULL 返回对象是否为null。: IS NULL: IS NULL: IS NULL: IS NULL示例1：[Customer].[Education].&[PrimarySchool] IS NULL示例2：[Date].[DueCalendarDate-Hierarchy].[CalendarYear] IS NULL示例3：[Customer].[person-Hierarchy] IS NULL示例4：[Customer].[Education].[Education] IS NULL InStr 返回一个字符串在另一个字符串中第一次出现的位置。实现非常基本的InStr形式:InStr(,)InStr(\"kylingence\",\"e\") InStrRev 从字符串的末尾返回一个字符串在另一个字符串中出现的位置。:InStrRev(,,,)字段1为要对其进行搜索的字符串表达式。字段2为要搜索的字符串表达式。字段3规定每次搜索的起始位置。默认的搜索起始位置是最后一个字符（-1）。字段4规定要使用的字符串比较类型。默认是0。可采用下列的值：0-执行二进制比较1-执行文本比较示例1：InStrRev(\"kylingence\",\"e\")示例2：InStrRev(\"kylingence\",\"e\",2)示例3：InStrRev(\"kylingence\",\"e\",2,1) Int 返回数字的整数部分。如果为负数，则返回小于或等于该数字的负数。:Int()Int(1.3) Intersect 返回两个输入集的交集，可选择保留重复项。可选的ALL标志保留重复项。指定的两个集合必须具有相同的维度:Intersect(,,):Intersect(,)Symbol:ALL示例1：Intersect({[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]},{[Customer].[Education].&[Bachelors]},All)示例2：Intersect({[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]},{[Customer].[Education].&[Bachelors]}) IsDate 返回一个布尔值，指示表达式是否可以转换为日期。:IsDate()IsDate(Date()) IsEmpty 确定表达式是否计算为空单元格值。:IsEmpty():IsEmpty()示例1：IsEmpty(\"\")示例2：IsEmpty(2) Item 返回中指定的元组的成员。要返回的成员由中的成员中从零开始的位置指定。:.Item()([Customer].[Education].&[Bachelors],[Date].[CalendarYear].&[2010]).Item(0) Item 从中指定的集合返回一个元组。要返回的元组由中集合中元组的从零开始的位置指定。:.Item(){[Customer].[BirthDate].[BirthDate].Members}.Item(1) Item 从中指定的集合返回一个元组。要返回的元组由中的成员名称（或多个名称）指定。.Item([,...])([InternetCustomer].[EDUCATION].[Bachelors],[InternetDueDate].[CalendarYear].&[2010]).Item(0) LCase 返回已转换为小写的字符串。:LCase()LCase(\"KYLINGENCE\") LTrim 返回包含不带前导空格的指定字符串的副本。:LTrim()LTrim(\"kylingence\") Lag 返回沿指定成员维度进一步的成员。:.Lag()[Customer].[Education].[HighSchool].Lag(1) LastChild 返回成员的最后一个子节点。:.LastChild[Date].[DueCalendarDate-Hierarchy].[CalendarYear].&[2013].LastChild LastSibling 返回成员父级的最后一个子级。:.LastSibling[Date].[CalendarYear].&[2010].LastSibling Lead 返回沿指定成员维度进一步的成员。:.Lead()[Customer].[Education].&[HighSchool].Lead(1) Left 从字符串的左侧返回指定数量的字符。:Left(,)Left(\"kylingence\",2) Len 返回字符串中的字符数。:Len()Len(\"kylingence\") Level 返回成员的级别。:.Level[Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2010].Level Levels 返回层次结构中的位置由数值表达式指定的级别。:.Levels()[Date].[DueFiscalDate-Hierarchy].levels(1) Levels 返回其名称由字符串表达式指定的级别。:.Levels():Levels()示例1：[Date].[DueFiscalDate-Hierarchy].Levels(\"DateKey\")示例2：Levels('[Customer].[person-Hierarchy].[Education]') LinRegIntercept 计算集合的线性回归，并在回归线y=ax+b中返回b的值。:LinRegIntercept(,):LinRegIntercept(,,)字段1为集的有效多维表达式，字段2表示Y轴值的数字的有效数值表达式，字段3通常是单元坐标（返回代表X轴的值的数字）的多维表达式(MDX)的有效数值表达式LinRegIntercept(LastPeriods(3,[Date].[CalendarYear].&[2014]),[Measures].[Count],[Measures].[ResellerCount]) LinRegPoint 计算集合的线性回归，并在回归线y=ax+b中返回y的值。:LinRegPoint(,,):LinRegPoint(,,,)字段1为一个数值（该数值表示切片轴的值）的单元坐标的多维表达式，字段2为集的有效多维表达式，字段3表示Y轴值的数字的有效数值表达式，字段4通常是单元坐标（返回代表X轴的值的数字）的多维表达式(MDX)的有效数值表达式LinRegPoint([Measures].[Count],LastPeriods(3,[Date].[CalendarYear].&[2014]),[Measures].[Count],[Measures].[ResellerCount]) LinRegR2 计算集合的线性回归并返回R2（确定系数）。:LinRegR2(,):LinRegR2(,,)字段1为集的有效多维表达式，字段2表示Y轴值的数字的有效数值表达式，字段3通常是单元坐标（返回代表X轴的值的数字）的多维表达式(MDX)的有效数值表达式LinRegR2(LastPeriods(3,[Date].[CalendarYear].&[2014]),[Measures].[Count],[Measures].[ResellerCount]) LinRegSlope 计算集合的线性回归并返回回归线y=ax+b中的a值。:LinRegSlope(,):LinRegSlope(,,)字段1为集的有效多维表达式，字段2表示Y轴值的数字的有效数值表达式，字段3通常是单元坐标（返回代表X轴的值的数字）的多维表达式(MDX)的有效数值表达式LinRegSlope(LastPeriods(3,[Date].[CalendarYear].&[2014]),[Measures].[Count],[Measures].[ResellerCount]) LinRegVariance 计算集合的线性回归并返回与回归线y=ax+b相关联的方差。:LinRegVariance(,):LinRegVariance(,,)字段1为集的有效多维表达式，字段2表示Y轴值的数字的有效数值表达式，字段3通常是单元坐标（返回代表X轴的值的数字）的多维表达式(MDX)的有效数值表达式LinRegVariance(LastPeriods(3,[Date].[CalendarYear].&[2014]),[Measures].[Count],[Measures].[ResellerCount]) Log 返回指定数字的自然对数。:Log()Log(Exp(2)) Log10 返回数字的以10为底的对数。:Log10()Log10(100) Max 返回在集合上计算的数值表达式的最大值。:Max():Max(,)示例1：max({[Date].[CalendarYear].[CalendarYear].Members})示例2：max({[Date].[CalendarYear].[CalendarYear].Members},[Measures].[Count]) Median 返回在集合上计算的数值表达式的中值。Median():Median(,)示例1：Median({[Date].[CalendarYear].[CalendarYear].Members})示例2：Median({[Date].[CalendarYear].[CalendarYear].Members},[Measures].[Count]) Members 返回对象中的成员集。:.Members:.Members:.Members示例1：[Date].[CalendarYear].[CalendarYear].Members示例2：[Customer].[person-Hierarchy].Members示例3：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].Members Mid 从字符串返回指定数量的字符。:Mid(,,)字段1为搜索的字符串。字段2规定起始位置。如果设置为大于字符串中的字符数目，则返回空字符串(\"\")。字段3为要返回的字符数目。如果省略或length超过文本的字符数（包括start处的字符），将返回字符串中从start到字符串结束的所有字符。示例1：Mid(\"kylingence\",3)示例2：Mid(\"kylingence\",2,4) Min 返回在集合上计算的数值表达式的最小值。:Min():Min(,)min([Date].[CalendarYear].[CalendarYear].Members,[Measures].[Count]) Minute 返回0到59之间的整数，包括0和59，表示小时的分钟。:Minute()Minute(CDate('2019-05-2320:49:28')) Month 返回1到12之间的整数，包括1和12，表示一年中的月份。:Month()Month(CDate('2012-03-2418:39:28')) Mtd PeriodsToDate函数的快捷函数，指定级别为Month。时间智能函数说明:Mtd():Mtd()MTD([Date].[Calendar-Hierarchy].currentmember) NOT 返回条件的否定。:NOTNOT[Measures].[Count]>80000 Name 返回名称。:.Name:.Name:.Name:.Name示例1：[Customer].[Education].[Education].Name示例2：[Customer].[person-Hierarchy].name示例3：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].name示例4：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].[2010].name NextMember 返回包含指定成员的级别中的下一个成员。:.NextMember[Customer].[Education].[HighSchool].NextMember NonEmptyCrossJoin 返回两个集合的叉积，不包括空元组和没有关联事实表数据的元组。:NonEmptyCrossJoin(,)NonEmptyCrossJoin([Customer].[LastName].[LastName].Members,[Customer].[GENDER].[GENDER].Members) Now 返回根据计算机的系统日期和时间指定当前日期和时间。:Now()Now() OR 或:OR[Measures].[Count]>80000OR[Measures].[SalesAmout]>30000000 Oct 返回表示数字八进制值的字符串。:Oct()Oct([Measures].[Count]) OpeningPeriod 返回某个级别成员的第一个后代。:OpeningPeriod()OpeningPeriod():OpeningPeriod(,)示例1：OpeningPeriod([Date].[DueFiscalDate-Hierarchy].[FiscalYear])示例2：OpeningPeriod([Date].[DueFiscalDate-Hierarchy].[FiscalYear],[Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2010])示例3：[Date].[DueFiscalDate-Hierarchy].[FiscalYear].openingperiod Order 排列集合的成员，可选地保留或破坏层次结构。如果指定了ASC或DESC，Order函数将根据成员在层次结构中的位置对其进行排列，然后对每个级别进行排序。如果指定了BASC或BDESC，则Order函数将排列集中的成员，而不考虑层次结构。在未指定标志的情况下，ASC为默认值。:Order(,,):Order(,)示例1：Order([Date].[CalendarYear].[CalendarYear].members,[Measures].[Count],DESC)示例2：Order([Date].[DueCalendarDate-Hierarchy].[CalendarYear].members,[Measures].[Count]) Ordinal 返回与级别关联的从零开始的序数值。:.Ordinal[Date].[CalendarYear].[CalendarYear].Ordinal PPmt 返回指定基于定期固定付款和固定利率的特定年金期间的本金。:PPmt(,,,,,)字段1为利率。字段2为计算其利息数额的期数。字段3为该项投资的付款期总数。字段4为现值，即本金。字段5为未来值，或在最后一次付款后希望得到的现金余额。如果省略fv，则假定其值为0（零），即贷款的未来值是0。字段6为数字0或1，用以指定各期的付款时间是在期初还是期末示例1：PPmt(0.1,1,30,100000)示例2：PPmt(0.1,15,30,100000,0)示例3：PPmt(0.1,1,30,100000,0,CBool(0)) PV 返回指定基于将来要支付的定期固定付款和固定利率的年金现值。:PV(,,,,)PV(0,3,2,7,CBool(1)) ParallelPeriod 返回前一句点中与指定成员处于相同相对位置的成员。:ParallelPeriod():ParallelPeriod():ParallelPeriod(,):ParallelPeriod(,,)示例1：ParallelPeriod([Date].[Calendar-Hierarchy].[CalendarYear])示例2：ParallelPeriod([Date].[Calendar-Hierarchy].[CalendarQuarter],1)示例3：ParallelPeriod([Date].[Calendar-Hierarchy].[CalendarYear],1,[Date].[Calendar-Hierarchy].currentMember Parameter 返回参数的默认值。:Parameter(,,,):Parameter(,,):Parameter(,,,):Parameter(,,):Parameter(,,,):Parameter(,,)使用场景较少 Parent 返回成员的父级。:.Parent[Date].[DueFiscalDate-Hierarchy].[FiscalYear].&[2013].&[1].&[1].Parent Percentile 返回位于给定百分位数的元组的值。:Percentile(,,)字段1为定义相对位置的元组。字段2为查询的值，字段3为0到1之间的百分点值，包含0和1。Percentile([Date].[CalendarQuarter].[CalendarQuarter].members,[Measures].[Count],1) PeriodsToDate 返回从第一个句点开始并以指定成员结束的指定级别的一组句点（成员）。:PeriodsToDate():PeriodsToDate():PeriodsToDate(,)示例1：PeriodsToDate([Date].[Calendar-Hierarchy].[CalendarQuarter])示例2：PeriodsToDate([Date].[Calendar-Hierarchy].[CalendarYear],[Date].[Calendar-Hierarchy].[MONTHNUMBEROFYEAR].&[34]) Pi 返回数字3.14159265358979，数学常数pi，精确到15位数。:Pi()Pi() Pmt 返回指定基于定期，固定付款和固定利率的年金付款。:Pmt(,,,,)字段1为贷款利率，字段2为付款总数，字段3为现值，或一系列未来付款额现在所值的总额，也叫本金。字段4为未来值，或在最后一次付款后希望得到的现金余额。如果省略fv，则假定其值为0（零），即贷款的未来值是0。字段5为数字0（零）或1指示支付时间。Pmt(0,3,2,7,CBool(1)) Power 返回提升到幂的数字的结果。:Power(,)Power(4,0.5) PrevMember 返回包含指定成员的级别中的上一个成员。:.PrevMember[Date].[CalendarYear].&[2012].PrevMember Properties 返回成员属性的值。.Properties()[Date].[CalendarYear].[CalendarYear].&[2007].Properties('Caption') Qtd PeriodsToDate函数的快捷函数，指定级别为Quarter。时间智能函数说明:Qtd():Qtd()QTD([Date].[Calendar-Hierarchy].currentmember) RTrim 返回包含指定字符串副本的Variant（String），不带尾随空格。:RTrim()RTrim('abc') Radians 将度数转换为弧度。:Radians()Radians(180) Rank 返回集合中元组的从1开始的排名。:Rank(,):Rank(,,):Rank(,)Rank(,,)示例1：Rank(([Date].[CalendarYear].&[2007],[Customer].[LastName].&[Adams]),[Date].[CalendarYear].[CalendarYear].members*[Customer].[LastName].[LastName].members)示例2：Rank(([Date].[CalendarYear].&[2007],[Customer].[LastName].&[Adams]),[Date].[CalendarYear].[CalendarYear].members*[Customer].[LastName].[LastName].members,[Measures].[Count])示例3：Rank([Date].[CalendarYear].&[2007],[Date].[CalendarYear].[CalendarYear].members)示例4：Rank([Date].[CalendarYear].&[2007],[Date].[CalendarYear].[CalendarYear].members,[Measures].[Count]) Rate 返回指定年金的每个期间的利率。:Rate(,,,,,)字段1为年金的付款总期数。字段2为每期的付款金额。字段3为现值即一系列未来付款当前值的总和。字段4为未来值，或在最后一次付款后希望得到的现金余额。如果省略，则假定其值为0。字段5为数字0或1，用以指定各期的付款时间是在期初还是期末。字段6为预期利率。如果省略，则假定其值为10%。示例1：Rate(12,500,3000)示例2：Rate(12,500,3000,300000)示例3：Rate(12,500,3000,300000,CBool(0))示例4：Rate(12,500,3000,300000,CBool(0),1) Replace 返回一个字符串，其中指定的子字符串已被指定次数的另一个子字符串替换。:Replace(,,,,,)字段1为元字符串。字段2为搜索的子字符串。字段3为替换子字符串。字段4为搜索起始位置，如果省略，假定为1。字段5为要执行的子字符串替换次数，如果省略，假定为-1，表示执行所有的替换。字段6为计算子字符串时的比较类型。Replace('kylingence',gence','mdx',1,1,1) Right 返回包含字符串右侧指定数量字符。:Right(,)Right('kylingence',2) Round 返回四舍五入到指定小数位数的数字。:Round(,):Round()示例1：Round(1.123)示例2：Round(1.123,2) SLN 返回指定单个期间资产的直线折旧。:SLN(,,)字段1为资产原值。字段2为折旧末尾时的值（有时也称为资产残值）。字段3为资产的折旧期数（有时也称作资产的使用寿命）。SLN(100,10,5) SYD 返回指定指定期间内资产的年数总和折旧。:SYD(,,,)字段1为资产原值。字段2为折旧末尾时的值（有时也称为资产残值）。字段3为资产的折旧期数（有时也称作资产的使用寿命）。字段4为期间，必须与字段3使用相同的单位。SYD(1000,100,5,5) Second 返回给定日期时间值的秒数。:Second()Second(CDate('2013-02-2316:39:28')) SetToStr 从集合构造一个字符串。:SetToStr()SetToStr([Date].[CalendarYear].Children) Sgn 返回表示数字符号的Variant(Integer)。:Sgn()Sgn(3.11111) Siblings 返回指定成员的兄弟节点，包括成员本身。.Siblings[Date].[CalendarYear].[CalendarYear].&[2007].Siblings Sin 返回指定角度正弦值。:Sin()Sin(60*Pi()/180) Sinh 返回数字的双曲正弦值。:Sinh()Sinh(-2) Space 返回由指定数量的空格组成的字符串。:Space()\"kylingence\"||Space(3)||\"MDX\" Sqr 返回指定数字的平方根。:Sqr()Sqr(4) SqrtPi 返回(number*pi)的平方根。:SqrtPi()SqrtPi(4) Stddev 别名StdevP函数:Stddev()Stddev(,)示例1：StdDev({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：StdDev({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},[Measures].[Count]) StddevP 别名StdevP函数:StddevP()StddevP(,)示例1：StddevP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：StddevP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},[Measures].[Count]) Stdev 返回在集合（无偏）上计算的数值表达式的标准偏差。:Stdev()Stdev(,)示例1：Stdev({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：Stdev({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},[Measures].[Count]) StdevP 返回在集合（有偏差）上计算的数值表达式的标准偏差。:StdevP()StdevP(,)示例1：StdevP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：StdevP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},[Measures].[Count]) Str 返回数字的字符串表示形式。:Str()Str(34) StrComp 返回表示字符串比较结果的Variant(Integer)。:StrComp(,,)字段3指定字符串比较的类型（可选）。比较参数为0（执行2进制比较），1（执行文本比较），2（基于数据库中的信息执行比较）示例1：StrComp(\"abcd\",\"ABCD\")示例2：StrComp(\"abcd\",\"ABCD\",0)StrComp(\"abcde\",\"ABCD\",1) StrReverse 返回一个字符串，其中指定字符串的字符顺序颠倒过来。:StrReverse()StrReverse(\"abcde\") StrToMember 以MDX格式从唯一名称返回成员。:StrToMember()StrToMember('[Customer].[Education].&[Bachelors]') StrToSet 根据字符串表达式构造一个集合。:StrToSet([,...])StrToSet(\"[Product].[Color].&[Red],[Product].[Color].&[Silver]\",[Product].[Color]) StrToTuple 从字符串构造一个元组。:StrToTuple()StrToTuple(\"([Product].[Color].&[Red],[Product].[Class].&[H])\",[Product].[Color],[Product].[Class]) String :String(,)String(3,\"h\") Subset 返回集合中元素的子集。:Subset(,)Subset(,,)字段1指定要返回第一个元组位置的有效数值表达式。字段2指定要返回的元组数的有效数值表达式。示例1：SubSet({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},2)示例2：SubSet({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},1,3) Sum 返回在集合上计算的数值表达式的总和。:Sum()Sum(,)Sum([Date].[DateKey].CurrentMember,[Measures].[Count]) Tail 返回集合末尾的子集。:Tail():Tail(,)示例1：Tail({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012],[Date].[CalendarYear].&[2013]})示例2：Tail({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012],[Date].[CalendarYear].&[2013]},2) Tan 返回指定角度正切值。:Tan()Tan(45*Pi()/180) Tanh 返回数字的双曲正切值。:Tanh()Tanh(-2) ThirdQ 返回在集合上计算的数值表达式的第3个四分位数值。:ThirdQ()ThirdQ(,)示例1：ThirdQ({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：ThirdQ({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012],[Date].[CalendarYear].&[2013]},[Measures].[Count]) Time 返回表示当前系统时间的Variant(Date)。:Time()Time() TimeSerial 返回指定小时，分钟和秒的时间。:TimeSerial(,,)字段1为小时，字段2为分钟，字段3为秒TimeSerial(16,34,17) TimeValue 返回包含时间的Variant(Date)。:TimeValue()TimeValue(CDate('2020-09-0218:20')) Timer 返回一个数值，表示自午夜以来经过的秒数。:Timer()Timer() ToggleDrillState ToggleDrillState函数用于切换第一个集中出现的第二个集的每个成员的钻取状态。第一个集可以包含任意维数的元组，但是第二个集必须包含单个维度的成员。ToggleDrillState函数是DrillupMember和DrilldownMember函数的组合。如果第二个集的成员m位于第一个集中，并且该成员被深化(即，在其后面紧跟有后代)，则DrillupMember(Set_Expression1,{m})将其应用于第一个集中的成员或元组。:ToggleDrillState(,)ToggleDrillState(,,)ToggleDrillState({[Customer].[Education].[Education].Members},{[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool]}) TopCount 从集合顶部返回指定数量的项目，可选择先排序集合。:TopCount(,,):TopCount(,)示例1：TopCount({[Customer].[Education].[Education].Members},3,[Measures].[Count])示例2：TopCount({[Customer].[Education].[Education].Members},3) TopPercent 对集合进行排序并返回前N个元素，其累计总数至少为指定的百分比。:TopPercent(,,)TopPercent({[Product].[Color].[Color].Members},60,[Measures].[Count]) TopSum 对集合进行排序并返回其累计总数至少为指定值的前N个元素。:TopSum(,,)TopSum({[Customer].[Education].[Education].Members},30000,[Measures].[Count]) Trim 返回包含指定字符串副本的Variant（String），该字符串没有前导和尾随空格。:Trim()Trim(\"delete空格\") TupleToStr 从元组构造一个字符串。:TupleToStr()TupleToStr(([Customer].[Education].&[Bachelors],[Date].[CalendarYear].&[2011])) TypeName 返回提供有关变量信息的字符串。:TypeName()TypeName(2) UCase 返回已转换为大写的字符串。:UCase()ucase(\"Kylingence\") Union 返回两个集合的并集，可选择ALL保留重复项。:Union(,):Union(,,)Symbol:All示例1：Union({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2013]},{[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2012]})示例2：Union({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2013]},{[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2012]},All) UniqueName 返回唯一名称。:.UniqueName:.UniqueName:.UniqueName:.UniqueName示例1：[Customer].[Education].[Education].UniqueName示例2：[Customer].[person-Hierarchy].UniqueName示例3：[Customer].[person-Hierarchy].[Education].uniquename示例4：[Customer].[Education].&[Bachelors].UniqueName Unorder 从指定集中删除任何强制排序。:Unorder()Unorder(order([Customer].[Education].[Education].Members,[Measures].[Count])) Val 返回字符串中包含的数字作为适当类型的数值。:Val()Val(\"34\") ValidMeasure 通过将不适用的维度强制到其顶级，返回虚拟多维数据集中的有效度量。:ValidMeasure()ValidMeasure(([Customer].[Education].&[Bachelors],[Date].[CalendarYear].&[2012])) Value 返回度量的值。.Value[Date].[CalendarYear].&[2010].Value Var 返回在集合（无偏）上计算的数值表达式的方差。:Var():Var(,)示例1：Var({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：Var({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},2) VarP 返回在集合（有偏差）上计算的数值表达式的方差。:VarP():VarP(,)示例1：VarP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：VarP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},2) Variance 别名VarP函数。:Variance():Variance(,)示例1：Variance({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：Variance({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},3) VarianceP 别名VarP函数。:VarianceP():VarianceP(,)示例1：VarianceP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]})示例2：VarianceP({[Date].[CalendarYear].&[2010],[Date].[CalendarYear].&[2011],[Date].[CalendarYear].&[2012]},3) VisualTotals 使用结果集中总标签的模式动态总计集合中指定的子成员。:VisualTotals():VisualTotals(,)示例1：VisualTotals({[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool],[Customer].[Education].&[PartialHighSchool]})示例2：VisualTotals({[Customer].[Education].&[Bachelors],[Customer].[Education].&[HighSchool],[Customer].[Education].&[PartialHighSchool]},'*-Visualtotals') Weekday 返回Variant(Integer)，其中包含表示星期几的整数。:Weekday(,)示例1：Weekday(Date())示例2：Weekday(Date(),3) WeekdayName 返回表示指定星期几的字符串。:WeekdayName(,,)WeekdayName(3,[Measures].[Count] Wtd PeriodsToDate函数的快捷函数，指定级别为Week。时间智能函数说明:Wtd():Wtd()WTD([Date].[Calendar-Hierarchy].currentmember) XOR 对两个数值表达式执行逻辑异运算。:XOR[Measures].[Count]>80000Xor[Measures].[SalesAmout] Year 返回包含表示年份的整数的Variant(Integer)。:Year()Year(CDate(\"2020-09-03\")) Ytd PeriodsToDate函数的快捷函数，指定级别为Year。具体使用方式可以参考时间智能函数说明:Ytd():Ytd()YTD([Date].[Calendar-Hierarchy].currentmember) _CaseMatch 计算各种表达式，并返回与特定值匹配的第一个表达式。Case When Then [...] [Else``] EndCASE sum([Date].[DateKey].CurrentMember,[Measures].[Count])WHEN 0 THEN 'NONE'WHEN 1 THEN 'SMALL'ELSE 'LARGE'END _CaseTest 计算各种条件，并返回第一个计算结果为true的表达式。Case When Then [...] [Else``] EndCASE WHEN [Measures].[Count]THEN 'TRUE'ELSE 'VERYLARGE'END || 连接两个字符串:||'kylin'||'gence' 注意 : MDX for Kylin 中的层级结构，在函数调用时需要写成以下形式：[xxx-Hierarchy] 时间智能函数说明 YTD、QTD、MTD、WTD 使用说明 将时间维表定义为 time 类型。 创建一个包含年月日的 Hierarchy, 并针对每个层级设置相应的维度属性。需要注意的是年月日对应的字段的格式需要是纯数字的， 比如 Y2018, Q1, 2018-01-01 等都是不符合格式要求的，这将会导致YTD、QTD、MTD、WTD 计算失效。 创建 CM，格式如下: YTD : SUM(YTD([DATE_DIM].[Date-Hierarchy].CurrentMember), [Measures].[XXX]) MTD : SUM(QTD([DATE_DIM].[Date-Hierarchy].CurrentMember), [Measures].[XXX]) Powered by Gitbook.            Last Modified： 2022-03-25 14:38:42 "},"dataset/metadata_synchronization.cn.html":{"url":"dataset/metadata_synchronization.cn.html","title":"元数据同步","keywords":"","body":"元数据同步 元数据同步原理 元数据同步种类 元数据同步频率设置 元数据失败重试机制 元数据同步原理 元数据同步是通过 HTTP 调用的方式从 Kylin 获取数据集需要的相关信息, 并和 MDX for Kylin 中已有的元数据信息进行比对，如果有变更，则根据 Kylin 的变更来修复 MDX 中元数据。 元数据同步种类 元数据同步的信息包含如下种类： 用户列表同步 用户组列表同步 Cube 列表同步 项目列表同步 Segment 列表同步 Cube 元数据信息列表同步 元数据同步频率设置 以上元数据种类，关于第 1 到第 4 项的更改对于用户而言更改难度较小、频率高及同步耗费小，固定 20 秒同步一次，不可更改。 第 5 项和第 6 项两项的更改频率低，默认是 300 秒，即 5 分钟同步一次，基准值是 20 秒， 默认配置值为 15，也就是 20 秒的 15 倍，表示 300 秒，配置项如下： insight.dataset.verify.interval.count=15 注意： 当同步执行任务量级较大时，可能会大于配置项值。真实的同步任务可能与配置项有差异，属于正常行为。 元数据失败重试机制 元数据同步任务可能会因为 Kylin 里用户信息变更等原因，导致 MDX for Kylin 中元数据同步任务停止。此时元数据同步任务会以 20 秒的频率失败重试。如果当前的同步用户信息或 Kylin 恢复正常，则同步任务恢复正常。 Powered by Gitbook.            Last Modified： 2022-03-18 16:13:55 "},"mdx_query/":{"url":"mdx_query/","title":"查询","keywords":"","body":"查询 在本章中，将为您介绍 MDX for Kylin 支持的查询语法以及查看查询历史。 Powered by Gitbook.            Last Modified： 2022-03-22 17:22:15 "},"mdx_query/query_syntax.cn.html":{"url":"mdx_query/query_syntax.cn.html","title":"查询语法","keywords":"","body":"查询语法 MDX for Kylin 目前支持的 MDX 语法属于标准 MDX 的子集，在某些细节上与最新标准存在一些差异。 本文介绍 MDX for Kylin 支持的语法结构。 SELECT 语句 采用 BNF 描述的语法结构： [ WITH [ , ...n ] ] SELECT [ * | ( [ , ,...n ] ) ] FROM [ ] [ ] ::= ( MEMBER ) | ( SET ) ::= [ NON EMPTY ] Set_Expression [ ] ON Integer_Expression | AXIS(Integer) | COLUMNS | ROWS | PAGES | SECTIONS | CHAPTERS ::= Cube_Name | [NON VISUAL] (SELECT [ * | ( [ , ,...n ] ) ] FROM ) ::= WHERE Tuple_Expression ::= [ CELL ] PROPERTIES Cell_Property_Name [ , Cell_Property_Name,...n ] ::= [DIMENSION] PROPERTIES (Dimension_Property_Name [,Dimension_Property_Name,...n ] ) | (Level_Property_Name [, Level_Property_Name,...n ] ) | (Member_Property_Name [, Member_Property_Name,...n ] ) 语法限制 SELECT_WITH_CLAUSE MDX 目前仅支持 MEMBER 和 SET， 计算度量和命名集需要在数据集中定义。 SELECT_QUERY_AXIS_CLAUSE 特定 Axis 上的查询语句， MDX 仅对最多使用两个 Axis 的情况下启用执行优化。 SELECT_SUBCUBE_CLAUSE 指定查询 Cube，目前支持 Cube_Name，对子查询有限支持。 SELECT_SLICER_AXIS_CLAUSE 表达式必须包含 Dimension 和 Hierarchy 中的 Member，不应该包含 SELECT_QUERY_AXIS_CLAUSE 表达式中所引用的 Member。 语法参数 参数 描述 Set_Expression 返回 Set 的有效多维表达式 Integer_Expression 一个介于 0 和 127 之间的整数 Cube_Name 提供 Cube 名称的有效字符串 Tuple_Expression 返回 Tuple 的有效多维表达式 Cell_Property_Name 表示 Cell 属性的有效字符串 Dimension_Property_Name 表示 Dimension 属性的有效字符串 Level_Property_Name 表示 Level 属性的有效字符串 Member_Property_Name 表示 Member 属性的有效字符串 Powered by Gitbook.            Last Modified： 2022-03-22 17:23:06 "},"mdx_query/query_history.cn.html":{"url":"mdx_query/query_history.cn.html","title":"查询历史","keywords":"","body":"查询历史 此界面保存了查询的基本信息，如查询时间、MDX 语句、查询用户等，可以帮助您记录查询行为，以及更好地管理或优化模型。本节我们为您介绍查询历史界面的内容。 进入查询历史 点击左侧菜单栏中的查询历史，即可进入查询历史页面。如下图所示，只要您对 MDX 进行过查询，就能看到所有查询分析的基本信息。 图片中的每一行是一次查询记录，列的含义如下： 开始时间：提交查询的时间 执行时长：执行完成查询所用的时间 查询语句：查询的 MDX 语句 数据集名称：查询使用的数据集 查询状态：有如下几种状态 成功 失败 应用：提交查询的 BI 的类型 查询节点：处理MDX请求的服务节点 查询用户：提交查询的 MDX for Kylin 用户 查询历史详情 当您点击某一条查询分析左侧的箭头图标时，将展开当前 MDX 查询的详细信息，信息分为查询详情和 SQL 语句两个部分，其中查询详情展示 MDX 脚本和查询的基本信息（如：会话 ID、查询状态等），SQL 语句则展示相关的 SQL 脚本。 【查询详情】 相关详情含义： 查询 ID： MDX 查询执行 ID 执行时长： MDX 查询执行的时长 是否使用 MDX 缓存： 查询是否击中 MDX 缓存 是否使用 Other 引擎： 是否使用了 Other 引擎 网络传输数据大小： 网络传输数据字节 是否超时： 是否查询超时 创建多维数据集结束的时间： 查询过程会生成的多维数据集的创建时间 结果集传输时间： 查询结果传输时间 数据集名称： 查询的数据集名称 是否使用 Gateway：发起查询的客户端是否使用 MDX for Kylin Gateway。 【SQL 语句】 注意：SQL 语句中仅能看到前 1000 行 SQL 语句，您可以点击 SQL 语句框内右上角的复制按钮复制完整的查询语句。 点击更多信息，可以查看详情： 相关详情含义： 系统 ID：SQL 查询执行 ID Kylin 查询 ID：返回结果集的行数 是否使用缓存：查询是否击中缓存 SQL 执行时间：SQL 执行时长 SQL 查询状态：SQL 查询结果状态 Powered by Gitbook.            Last Modified： 2022-03-22 17:41:59 "},"integration/":{"url":"integration/","title":"BI 集成","keywords":"","body":"BI集成 在本章中，将为您介绍 MDX for Kylin 如何与BI集成。 Powered by Gitbook.            Last Modified： 2022-03-22 17:43:48 "},"integration/excel_integration.cn.html":{"url":"integration/excel_integration.cn.html","title":"与 Excel 集成","keywords":"","body":"与 Excel 集成 本章节将介绍如何使用 Excel 分析 MDX for Kylin 中定义的数据集，使用 Excel 的数据透视表功能，通过 MDX for Kylin 直接在线查询分析 MDX for Kylin 中定义的数据集。 前提条件 使用 Excel 连接 MDX for Kylin 了解更多 前提条件 安装部署 MDX for Kylin Window 中安装 Excel 2007 及以上版本 使用 Excel 连接 MDX for Kylin 打开 Excel 中选择 数据 —> 获取数据 —> 来自数据库 —>自 Analysis Services 接下来您需要在服务器名称一栏中填写连接 MDX for Kylin 的地址信息，样本如下： http://{host}:{port}/mdx/xmla/{project} MDX for Kylin 默认端口号是7080，project 为 MDX for Kylin 中访问的项目信息。管理员可以在 MDX for Kylin 的安装路径下的 conf/insight.properties 文件中 insight.semantic.port 配置项查找到 MDX for Kylin 的端口号。 若设置了 insight.semantic.context-path 配置项，则需要将地址信息写成： http://{host}:{port}/{context-path}/mdx/xmla/{project} 其中 host 和 port 都应该写成连接 Kylin 的信息。举例： # 设置 context-path 如下 insight.semantic.context-path=/ws/testworkspace/mdx # kylin 登录地址，其中{host}:{port}为 10.10.10.200:7070 http://10.10.10.200:7070/kylin # 则 Excel 中的地址信息应该写成 http://10.10.10.200:7070/ws/testworkspace/mdx/mdx/xmla/test_project 登录凭证请选择使用下列用户名和密码。用户名和密码为您的 MDX for Kylin 登录用户名和密码。 现在数据集已经被连接到 Excel 了。选择您需要使用的数据集，点击下一步。 勾选总是尝试文件来刷新数据，并勾选在文件中保存密码并勾选总是尝试使用此文件来刷新数据，点击完成。 如果您没有勾选这两项，可能会出现频繁认证和刷新报表失败的情况。 现在，您可以使用 Excel 透视表分析 MDX for Kylin 的数据集了。 了解更多 欲了解更多 MDX for Kylin 对接 Excel 的支持情况，请参阅 Excel 功能支持列表。 Powered by Gitbook.            Last Modified： 2022-03-23 18:16:11 "},"integration/excel_function_list.cn.html":{"url":"integration/excel_function_list.cn.html","title":"Excel 功能支持列表","keywords":"","body":"Excel 功能支持列表 前置条件 以下功能需要 Excel 2010 及以上版本 数据连接 功能 支持状态 操作路径 备注 SSAS 连接入口 - 使用账号密码认证 支持 数据 - 获取数据 - 来自数据库 - SSAS 连接过程中需要勾选 在文件中保存密码 和 总是尝试使用文件来刷新 ，否则将可能需要频繁输入认证信息来保持连接 现有连接 支持 数据 - 现有连接 现有连接有两种方式，选择此工作簿中的连接，将会使新建的透视表使用相同连接，选择此计算机的连接文件，会新创建一个连接副本，新建的透视表会使用新的连接副本。另外数据刷新时，同一个连接的透视表将会一并更新 插入透视表 支持 插入-透视表-外部连接 可以选择 SSAS 之外的连接入口，比如 XMLA Connect 脱机文件导入 不支持 拖拽.cub 文件至 Excel 中 Excel 支持从多维服务器中抽取数据，生成 .cub 文件，用于离线分析 透视表分析 在 Excel 透视表中使用语义实体 以下是可在透视表中使用的语义实体 功能 支持状态 操作路径 备注 度量组 支持 透视表字段 默认每个模型对应一个度量组，计算度量单独一个度量组 度量文件夹 支持 透视表字段 维度表 支持 透视表字段 公共维表仅会显示一个 命名集 支持 透视表字段 命名集文件夹 支持 透视表字段 命名集定义后默认在集合文件夹显示 层级维度 支持 透视表字段 普通维度 支持 透视表字段 维度文件夹 支持 透视表字段 字段选择和搜索 功能 支持状态 操作路径 备注 筛选区域 支持 透视表字段 支持对普通维度和层级维度进行筛选 行区域 支持 透视表字段 可以选择普通维度，层级维度和命名集。 列区域 支持 透视表字段 可以选择普通维度，层级维度和命名集。点选时间维度时，时间维度会默认放置在行区域。 值区域 支持 透视表字段 可以选择多个度量。当度量超过两个时，将在列区域默认生成数值维度。 字段搜索 支持 透视表字段 可以在搜索框中搜索维度、度量、层级、命名集 筛选功能 功能 支持状态 操作路径 备注 筛选区域筛选 支持 筛选区域对字段筛选 支持筛选普通维度和层级维度，支持单选和多选，支持模糊查询 行列字段筛选 支持 行区域对字段筛选 支持筛选普通维度和层级维度，支持单选和多选，支持模糊查询 仅保留所选项目隐藏所选项目 支持 列区域对字段筛选 属于列表筛选，不能和值筛选，标签筛选共存 TopN 筛选 支持 透视表右键菜单 - 筛选 属于值筛选的一种；多个维度 TopN，不能联动生效；Hierarchy 多个 Level TopN，可能会导致数据不准确 值筛选 支持 透视表右键菜单 - 筛选 需要配置参数 insight.mdx.mondrian.mdprop.mdx.subqueries 开启子查询，详见基本配置参数；值筛选和标签筛选不能同时生效；对于单字符 等于/不等于/结尾是/结尾不是/大于/小于等于/介于/不介于 查询结果有误；对Hierarchy值筛选后，不可展开；筛选后均不可展示总计 标签筛选 支持 透视表右键菜单 - 筛选 需要配置参数 insight.mdx.mondrian.mdprop.mdx.subqueries 开启子查询，详见基本配置参数；值筛选和标签筛选不能同时生效；对于单字符 等于/不等于/结尾是/结尾不是/大于/小于等于/介于/不介于 查询结果有误；对Hierarchy标签筛选后，不可展开；筛选后均不可展示总计 切片器筛选 支持 透视表分析 属于列表筛选 日程表筛选 不支持 透视表分析 属于列表筛选，滑块形式 Excel 列复制筛选 支持 复制透视表字段 - 字段筛选 复制 Excel 中的一列至空白行，对该列进行筛选，属于 Excel 内部筛选 排序功能 功能 支持状态 操作路径 备注 数据源排序 支持 透视表右键菜单 - 排序 默认是按 SQL 中的字段排序，可以设置 Key Column / Name column 来更改排序显示 手动排序 支持 透视表右键菜单 - 移动 通过 move 功能进行自定义排序 指定字段排序 支持 透视表右键菜单 - 排序 根据所选字段排序，与其他排序手段不能共存 布局显示 功能 支持状态 操作路径 备注 显示格式 支持 透视表右键菜单 - 单元格格式 可以在数据集设计阶段设置度量显示格式，如显示金额符号 $, ￥等，也可以在 Excel 上设置 显示总计 支持 设计 - 分类汇总 一般来说基数小的列放在左边，性能更佳 显示小计 支持 设计 - 分类汇总 一般来说基数小的列放在左边，性能更佳 汇总包含筛选项 不支持 设计 - 分类汇总 对列进行筛选后，总计会依据筛选进行变化。该功能支持总计不依据筛选项进行变化 显示折叠/收缩按钮 部分支持 透视表分析 - 显示 如果是层级维度，默认带 +/- 按钮。如果是多个普通维度，目前不会生成 +/- 按钮。 行显示空数据项 不支持 透视表右键菜单 - 数据透视表选项 - 显示 默认行上所有度量为空时，该行将会被隐藏 列显示空数据项 不支持 透视表右键菜单 - 数据透视表选项 - 显示 默认列上所有度量为空时，该列将会被隐藏 显示字段标题 支持 透视表右键菜单 - 数据透视表选项 - 显示 显示字段列表 支持 透视表分析 - 显示 Tooltip 显示属性 不支持 透视表右键菜单 报表上显示属性 不支持 透视表右键菜单 分组显示空行 支持 设计 - 空行 勾选后将在每个分组后显示空行 字段展开 支持 透视表右键菜单 - 展开 支持展开一层和全部展开 字段折叠 支持 透视表右键菜单 - 折叠 支持折叠一层和全部折叠 层级向下钻取 部分支持 透视表分析 目前只能最多下钻两层，开启子查询后可以下钻多层 层级向上钻取 部分支持 透视表分析 功能不完善，见上 标签重复显示 支持 设计 - 报表布局 压缩形式布局 支持 设计 - 报表布局 大纲形式布局 支持 设计 - 报表布局 表格形式布局 支持 设计 - 报表布局 数据更新 功能 支持状态 操作路径 备注 延迟布局更新 支持 数据透视表字段 仅更新数据，但不会更新结构。如果结构有变更（维度/度量缺失），将会报错 透视表右键更新 支持 数据透视表右键 既更新数据，又更新结构。如果结构有变更，报表将自适应变更，可能会移除相关维度/度量，或者清空整个报表 数据 - 刷新 支持 数据 - 刷新 同上，会更新同一连接的所有报表 全部刷新 支持 数据 会更新所有连接的所有报表 多维数据集函数 功能 支持状态 操作路径 备注 CubeMember 支持 单元格输入公式 返回多维数据集中的成员或元组。 用于验证多 维数据集内是否存在成员或元组 CubeValue 支持 单元格输入公式 从多维数据集中返回汇总值 CubeSet 不支持 单元格输入公式 定义成员或元组的计算集。方法是向服务器上的多维数据集发送一个集合表达式，此表达式创建集合，并随后将该集合返回到 Microsoft Excel CubeSetCount 不支持 单元格输入公式 返回集合中的项目数 CubeKPIMember 不支持 单元格输入公式 返回重要性能指示器 (KPI) 属性，并在单元格中显示 KPI 名称。 KPI 是一种用于监控单位绩效的可计量度量值，如每月总利润或季度员工调整 CubeMemberProperty 不支持 单元格输入公式 返回多维数据集中成员属性的值。 用于验证多维数据集内是否存在某个成员名并返回此成员的指定属性 CubeRankedMember 支持 单元格输入公式 返回集合中的第 n 个或排在一定名次的成员。 用来返回集合中的一个或多个元素，如业绩最好的销售人员或前 10 名的学生 高级功能 功能 支持状态 操作路径 备注 ESC 取消查询 支持 查询过程中键入 ESC 集群情况下可能存在问题 快速计算 支持 透视表右键菜单 - 值显示方式 类似 Tableau 的表计算功能 创建/取消分组 支持 透视表右键菜单 在头部-长尾场景分析中常见，长尾归类为 Others 钻取明细 部分支持 透视表右键菜单 可以双击度量组钻取明细 基于行创建集合 不支持 透视表分析 - 字段、项目和集 可以在 MDX for Kylin 数据集界面定义 基于 MDX 创建集合 不支持 透视表分析 - 字段、项目和集 可以在 MDX for Kylin 数据集界面定义 创建计算度量 不支持 透视表分析 - OLAP 工具 可以在 MDX for Kylin 数据集界面定义 创建计算成员 不支持 透视表分析 - OLAP 工具 可以在 MDX for Kylin 数据集界面定义 模拟分析 不支持 透视表分析 - OLAP 工具 需要具备数据回写功能 脱机分析 不支持 透视表分析 - OLAP 工具 报表制作 功能 支持状态 操作路径 备注 插入图表 支持 插入 - 图表 可以选择各种类型的图表来进行数据可视化 筛选器联动 支持 透视表分析 - 筛选器连接 筛选器设置关联多个透视表后，可进行联动分析，在仪表板中经常使用 报表分享 功能 支持状态 操作路径 备注 数据源切换 支持 透视表分析 - 更改数据源 此操作会更新结构，并更新数据。如果结构有变更，报表将自适应变更，可能会移除相关维度/度量，或者清空整个报表 Powered by Gitbook.            Last Modified： 2022-03-25 18:12:41 "},"integration/tableau_integration.cn.html":{"url":"integration/tableau_integration.cn.html","title":"与 Tableau 集成","keywords":"","body":"与 Tableau 集成 本章节将介绍如何使用 Tableau 分析 MDX for Kylin 中定义的数据集，使用 Tableau 的 Microsoft Analysis Services 连接器，直接在线查询分析 MDX for Kylin 中定义的数据集。 前提条件 使用 Tableau 连接 MDX for Kylin 前提条件 安装部署 MDX for Kylin 安装 Tableau 的 Microsoft Analysis Services 驱动，详见Microsoft Analysis Services 驱动 推荐下载 2012 SP1（版本 11.0.2100.60） 使用 Tableau 连接 MDX for Kylin 选择 连接 —> Microsoft Analysis Services 接下来您需要在服务器名称一栏中填写连接 MDX for Kylin Semantic 的地址信息，样本如下： http://{host}:{port}/mdx/xmla/{project} MDX for Kylin Semantic 默认端口号是7080，用户名和密码时您的 MDX for Kylin 登录用户名和密码。 若设置了 insight.semantic.context-path 配置项，则需要将地址信息写成： http://{host}:{port}/{context-path}/mdx/xmla/{project} 其中 host 和 port 都应该写成连接 Kylin 的信息。举例： # 设置 context-path 如下 insight.semantic.context-path=/ws/testworkspace/mdx # Kylin 登录地址，其中{host}:{port}为 10.10.10.200:7070 http://10.10.10.200:7070/kylin # 则服务器地址信息应该写成 http://10.10.10.200:7070/ws/testworkspace/mdx/mdx/xmla/test_project 现在 Dataset 已经被连接到 Tableau 了。选择您需要使用的 Dataset，点击下一步。 选择数据集后，Tableau即可读取数据集的相关信息，点击工作簿即可开始分析。 现在，您可以使用 Tableau 分析 MDX for Kylin 的 Dataset 了。 Powered by Gitbook.            Last Modified： 2022-03-22 17:58:31 "},"integration/tableau_function_list.cn.html":{"url":"integration/tableau_function_list.cn.html","title":"Tableau 功能支持列表","keywords":"","body":"Tableau 功能支持列表 前置条件 以下功能需要 Windows 环境 Tableau 10.x 及以上版本。 数据连接 功能 支持状态 操作路径 使用 Windows 身份验证 不支持 连接 - 到服务器 - 更多 - Microsoft Analysis Services - 使用 Windows 身份验证 使用特定用户名和密码 支持 连接 - 到服务器 - 更多 - Microsoft Analysis Services - 使用特定用户名和密码 同步语义实体 功能 支持状态 备注 维度表 支持 层级维度 支持 维度 支持 度量 支持 计算度量 支持 计算度量和普通度量都展示在度量区域 命名集 支持 文件夹 不支持 维度、度量等的文件夹都不支持 字段选择和搜索 功能 支持状态 备注 筛选 支持 支持对维度，层级结构和度量进行筛选 行 支持 可以选择维度，层级结构和度量 列 支持 可以选择维度，层级结构和度量 工作表区域 支持 字段搜索 支持 可以在搜索框中搜索维度、度量、层级结构 筛选功能 功能 支持状态 备注 维度筛选 支持 支持常规、条件、顶部筛选，支持单选和多选，支持模糊查询 层级结构筛选 支持 支持常规、条件、顶部筛选，支持单选和多选，支持模糊查询 度量、计算度量筛选 支持 支持值范围、至少、至多、特殊值 排序功能 功能 支持状态 备注 维度、层级结构排序 支持 通过轴、标题、字段标签、工具栏进行排序，可以手动拖拽排序，支持数据源顺序、字母、字段、手动、嵌套排序 度量、计算度量排序 支持 通过轴、标题、字段标签、工具栏进行排序，可以手动拖拽排序 布局显示 功能 支持状态 操作路径 备注 格式设置 支持 右键菜单 - 设置格式 可以在数据集设计阶段设置度量显示格式，如显示金额符号 $, ￥等，也可以在 Tableau 上设置 显示总计 支持 分析 - 合计 一般来说基数小的列放在左边，性能更佳 显示小计 支持 分析 - 合计 - 添加所有小计 一般来说基数小的列放在左边，性能更佳 数据更新 功能 支持状态 操作路径 备注 自动更新工作表 支持 工具栏 - 自动更新工作表 数据源 - 刷新 支持 数据 - 指定数据源 - 刷新 会更新同一连接的所有报表 仪表板 功能 支持状态 操作路径 操作 - 筛选器 支持 仪表板 - 操作 - 添加操作 - 筛选器 操作 - 突出显示 支持 仪表板 - 操作 - 添加操作 - 突出显示 操作 - 转到 URL 支持 仪表板 - 操作 - 添加操作 - 转到 URL 操作 - 转到工作表 支持 仪表板 - 操作 - 添加操作 - 转到工作表 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"security/":{"url":"security/","title":"安全控制","keywords":"","body":"安全控制 在本章中，将为您介绍如何配置数据集角色，实现权限管控。 Powered by Gitbook.            Last Modified： 2022-03-25 17:57:19 "},"security/role.cn.html":{"url":"security/role.cn.html","title":"数据集角色","keywords":"","body":"数据集角色 本节将介绍什么是角色，以及如何定义角色，及为用户分配角色。 数据集角色的定义 默认 Admin 角色 为用户分配角色 管理角色 配置角色权限 数据集角色的定义 MDX for Kylin 提供了用户级别的语义信息权限控制和角色级别的语义信息访问控制。如下信息需要注意： 用户在未被分配任何数据集角色，或者配置用户级别的白名单时，用户无任何数据集的访问权限。 用户必须至少具备一个数据集中一个度量或者一个计算度量的访问权限，否则用户无法连接该数据集。 用户应该在 Kylin 中具备数据集对应的项目、表，否则无法连接数据集。 用户被赋予多个角色时，最终的权限为各个角色级别和用户级别的白名单的合集，即若在数据集中用户 A 的访问权限为维度 1 和度量 1，角色 A 的访问权限为维度 2 和度量 2，同时用户 A 又属于角色 A，那么用户 A 的最终访问权限为维度 1、维度 2、度量 1 和度量 2。 默认 Admin 角色 MDX for Kylin 初始会自带一个默认角色，即管理员（Admin）角色，其拥有所有数据集的所有语义信息的访问权限。 Admin 角色的权限分配情况可在进入管理页面——>数据集角色页面 进行查看。 为用户分配角色 您可在进入管理页面——>数据集角色页面中将当前角色批量分配给用户。用户被分配角色后会获得当前角色所拥有的权限。 当用户被分配多个角色时，用户所拥有的权限是所有角色权限的合集。 管理角色 您可在安全 - -> 角色 中创建、编辑及删除角色。您可以批量修改被授予当前角色的用户列表。 注意： 默认角色不可以被编辑和删除。 配置角色权限 想了解如何配置数据集角色的权限，您可以查看配置权限列表章节。 Powered by Gitbook.            Last Modified： 2022-03-23 17:59:46 "},"security/object_level_security.cn.html":{"url":"security/object_level_security.cn.html","title":"实体安全性","keywords":"","body":"实体安全性 理解实体安全性 在实际使用中，语义模型的管理员需要对不同实体的访问权限进行细颗粒读的访问控制，比如度量销售额对公司的物流用户组不可见，但计算度量2020年全年销售额公司的对物流用户组可见，基于这个需求，目前MDX的实体安全性的设计原则为，用户在互相依赖的实体之间的访问控制可分别配置，即会出现某度量对用户不可见但是引用该度量的计算度量用户可见的情况。 实体访问权限的状态 实体访问权限有3种状态： 实体访问状态 产品行为 未配置 未配置访问权限的情况下，用户默认对实体不可见，可通过在配置文件中修改未配置访问权限时的用户的默认访问权限，详见下文。 可访问 配置了可访问后，用户可以查看并查询该实体 不可访问 配置了不可访问后，用户无法查看到该实体，并不可以查询 授予访问权限的粒度 用户在一个数据集上的实体访问权限决定了用户对于数据集上的访问权限，用户必须至少具备一个数据集中一个度量或者一个计算度量的访问权限，否则用户无法查看和查询该数据集。 注意: 由于 Tableau 默认会存在一个 count(*) 的内置度量，所以仅添加维度的权限也可以对接 MDX for Kylin，但是由于这样并没有意义，不建议这样使用 MDX for Kylin。 您可以通过修改参数来配置用户默认情况下对数据集及实体默认访问权限，该参数默认关闭。 参数名称 insight.dataset.allow-access-by-default 使用效果 当为 true 时，所有数据集默认可见性未配置时，数据集对用户可见；当为 false 时，所有数据集默认对用户不可见，数据集可见性需要在界面配置为可见才可查询 默认值 false 生效是否需要重启 是 以角色为单位进行实体授权 MDX for Kylin 提供了用户级别和角色级别的访问权限配置，您可以创建角色并将用户加入角色来实现对一组用户的权限进行统一管理。您可以参考角色对用户角色进行配置。 当用户属于多种角色时，最终的用户的访问权限为各个角色和用户权限的合集，即若在数据集中用户 A 的访问权限为维度 1 和度量 1，角色 A 的访问权限为维度 2 和度量 2，同时用户 A 又属于角色 A，那么用户 A 的最终访问权限为维度 1、维度 2、度量 1 和度量 2。 以用户组为单位进行实体授权 您可以以用户组为单位进行实体授权。 MDX for Kylin 定期同步 Kylin 中的用户和用户组信息，以及用户组包含的用户信息。 用户组和用户，用户组和用户组之间的数据集访问权限会取并集关系。例如，用户 A 在用户组 U1 中，用户 A 被限制了数据集 DA1 中维度 D1 和度量 M1 的访问，用户组 U1 被限制了数据集 DA1 上 的 D2 和 M2 的访问权限。在这种情况下，用户 A 可以访问数据集 D1 的其他实体，但不能访问维度 D1，D2 和 M1 和 M2。 配置实体访问列表 目前您可以在数据集菜单对实体访问权限进行配置，目前 MDX for Kylin 支持对维度、度量、计算度量、命名集进行实体访问列表配置。您可以参考配置权限列表对实体访问列表进行配置。 实体可见性 您可在维度、度量、计算度量、命名集的编辑器上配置其是否可见，当该实体被配置为不可见状态时，所有用户对该实体的访问权限也会受到限制，且在实体的权限列表上单个用户或角色的访问将自动配置为不可访问状态且不可更改。 Powered by Gitbook.            Last Modified： 2022-03-25 14:43:26 "},"operations/":{"url":"operations/","title":"系统运维","keywords":"","body":"系统运维 在本章中，将为您介绍系统运维所需的各项功能，如日志等。 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"operations/logging.cn.html":{"url":"operations/logging.cn.html","title":"日志文件","keywords":"","body":"系统日志 MDX for Kylin 顺利启动后，默认会在安装目录下生成logs/目录，所有 MDX for Kylin 运行过程中生成的日志文件会保存在该目录中。 日志文件 MDX for Kylin 生成的日志文件如下： mdx.log 该文件是通过 Excel 访问 Semantic 时生成的日志，默认级别 INFO。 semantic.log 该文件是 Semantic 服务生成的日志，默认级别 INFO。 semantic.out 该文件是标准输出的重定向文件，一些非 Semantic 生成的标准输出将被重定向到该文件。 gateway.log 该文件是 Gateway 服务生成的日志，默认级别 INFO。 日志配置 MDX for Kylin 使用 log4j 记录日志，用户可以编辑 $MDX_HOME/conf/ 目录中的 log4j.properties 文件， 对日志文件的切分规则、大小上限等属性进行修改。例如： semantic.log 和 mdx.log 日志文件的默认输出类型是 org.apache.log4j.RollingFileAppender， 即文件大小达到指定尺寸的时候产生一个新文件。如果您想要每天产生一个日志文件，可以将 log4j.appender.file 和/或 log4j.appender.mdx 配置项的值改为 org.apache.log4j.DailyRollingFileAppender。 log4j.appender.file.MaxFileSize 和 log4j.appender.mdx.MaxFileSize 分别定义上述单个 semantic.log 和 mdx.log 日志文件的最大大小，默认值为 268435456 ，即 256MB。 log4j.appender.file.MaxBackupIndex 和 log4j.appender.mdx.MaxBackupIndex 分别定义 semantic.log 和 mdx.log 日志文件的最大保留数量，默认值为 10。 修改 log4j.properties 文件后，需要重启 MDX for Kylin 使配置生效。 日志排错 MDX 日志中包含查询 ID 及 API 的调用者信息，可以通过这些信息来增加排错能力。 查询 ID。对接 MDX 的 BI 工具发的 MDX 查询，都会在 MDX 生成唯一的查询 ID，可以根据查询 ID 去溯源相关的信息。 API的调用者信息。可以通过 API 的调用者信息，来定位操作用户。 Powered by Gitbook.            Last Modified： 2022-03-23 17:49:00 "},"operations/diagnosis.cn.html":{"url":"operations/diagnosis.cn.html","title":"诊断包","keywords":"","body":"诊断包 系统配置 通过网页生成诊断包 通过脚本生成诊断包 多节点部署配置示例 MDX for Kylin 配置项 对 Nginx 路由规则配置要求 诊断包内容 注意信息 系统配置 Kylin 需要您在安装时正确的配置每个节点的信息，详见手册在 Linux 环境安装 通过网页生成诊断包 系统诊断包包含整个 MDX for Kylin 实例的诊断信息，生成系统诊断包需要如下操作 使用 Kylin 的系统管理员账户登录 MDX for Kylin 点击右上角的进入管理界面按钮 选择时间范围，您可以选择当天、最近3天、最近7天、最近1个月，或者自定义时间范围 提示： 选择的时间范围必须包含 MDX for Kylin 发生问题的时间段。 选择服务器 提示： 如果 MDX for Kylin 部署在多节点上，需要确定发生问题的节点，并在生成系统诊断包时选择正确的服务器名字，否则有可能系统诊断包中不包含问题的有关信息。 之后您便可以下载诊断包。 通过脚本生成诊断包 除网页界面外，您也可以通过脚本生成诊断包 您可以进入MDX如下目录 $MDX_HOME/semantic-mdx/scripts/ 中,执行如下命令 ./diagnose_package_offline.sh 起始时间: 13位时间戳; 截止时间: 13位时间戳; MDX ip: MDX节点IP; MDX port: MDX节点端口; 是否dump mysql数据库: 输入 y 表示需要 dump mysql，输入 n 表示不需要; 诊断包输出路径: 诊断包输出路径，默认为 $MDX_HOME/semantic-mdx/diag_dump 目录下; 以下脚本执行示例表示打包 localhost 节点 7080 端口的 MDX 实例 ，时间范围为 2021-03-07 - 2021-03-08，需要 dump mysql 数据库, 且输出诊断包到目录 /usr/local/: ./diagnose_package_offline.sh 1615046400000 1615132800000 localhost 7080 y /usr/local/ 多节点部署配置示例 MDX for Kylin 配置项 您需要在每一个 MDX 节点的 [MDX 安装目录]/conf/insight.properties 文件中添加配置项 insight.mdx.cluster.nodes=IP1:Port1,IP2:Port2，将集群中所有 MDX for Kylin 节点的 IP 和 Port 信息加入配置文件中。 对 Nginx 路由规则配置要求 根据自定义 header：x-Host 和 x-Port 以将请求转发到指定的节点上，以确保可以在页面上通知多个节点生成诊断包并下载。 需要在 Nginx 配置文件中，添加路由规则：例如对两台机器上的 A、B 两个 MDX for Kylin 节点，其 IP 和 Port 分别为 IP_A:Port_A 和 IP_B:Port_B，则需要在 Nginx 的配置文件中添加如下配置： upstream nodes { server ip_A:port_A; server ip_B:port_B; } server { listen port_N; server_name ip_N; #charset utf-8;(Recommended Use) #Enable custom header underscores_in_headers on; location / { if ($http_x_host = '') { #Requests without custom headers can be sent to any node proxy_pass http://nodes; break; } #For requests containing custom headers, forward them to the specified node proxy_pass http://$http_x_host:$http_x_port; break; } } 此时的转发逻辑如下图所示： 诊断包内容 系统诊断包包含如下内容： conf_{timestamp} 目录 indicators.json : MDX 计算度量模板文件，记录了定义计算度量可使用的模版信息 insight.properties : MDX 配置文件 set-jvm.sh : MDX JVM 参数配置文件（内容也可在 insight.properties 中相应参数中修改） startup.sh : MDX 启动脚本 logs_{timestamp} 目录 gc-{timestamp}.log : MDX JVM GC 活动日志 mdx.log : MDX 查询日志，合并了若干 MDX 查询日志文件在指定时段内容（按原始文件修改时间排列，会标注 \"Content above from file : \" ） semantic.log : MDX API 调用日志，合并了若干 MDX API 调用日志文件在指定时段内容（如：从 Kylin 同步信息、页面数据集访问等） jstack.log : MDX 进程 ID、core file、远程调试服务的 Java 堆栈信息 jmap.log : MDX 进程内存的映射信息和堆空间分配情况 top.log : 系统中各个进程资源的占用状况 mos_scripts.out : 分布式 MDX 启动时记录拷贝服务器 Hadoop 相关配置文件以及替换相关冲突 jar 包的过程信息 mdx_env ：MDX 运行环境信息文件，包含从 MDX 版本、JDK 版本到系统环境等详细信息 sync_info ：MDX 同步任务信息文件，包含当前同步用户名和当前同步任务状态 schema_{timestamp} 目录 {user}_{project}.xml : 若干文件，数据集的结构信息（同一数据集对不同用户可能因可见性设置有不同的结构） dataset_{timestamp} 目录 Project-{project}_Dataset-{dataset}.json : 若干文件，数据集的 json 文件，可用于从前端界面导入（需要连接相应的 Kylin) 注意信息 多节点部署配置示例中 Nginx 配置为示例配置，具体的路由方式和过滤范围可根据实际需要进行调整。 由于请求诊断包时使用配置文件中给出的 IP 和 Port 信息，请不要使用 localhost，可能会导致 Nginx 转发失败导致请求无法成功。 每次新生成诊断包时，会清除 7 天前生成的诊断包。 Powered by Gitbook.            Last Modified： 2022-03-23 16:07:15 "},"operations/error_code.cn.html":{"url":"operations/error_code.cn.html","title":"错误码","keywords":"","body":"Error Code Error 命名规则 为了使报错信息更加简洁明了，可追溯，按照模块业务进行划分错误码，格式为：MDX-AABBCCCC AA: 服务模块，例如 Semantic 服务，MDX 服务，系统服务等等 BB: 服务模块下的各项业务，比如 Semantic 服务下的 dataset 编辑、克隆 CCCC: 具体出错原因，比如字符串长度超限，查询结果超长等等 具体的服务模块和业务列表如下： 服务模块 业务分类 01 System Service 0102 System Config User 01 System Service 0104 Diagnose Package 01 System Service 0105 Sync Task 01 System Service 0106 User / Group / Role 01 System Service 0107 DB 01 System Service 0108 System Tool 02 Semantic Service 0201 Kylin API CALL 02 Semantic Service 0202 Dataset 03 MDX Service 0301 Schema 03 MDX Service 0302 XMLA 03 MDX Service 0303 Query 03 MDX Service 0304 Rewrite / Reject 04 Authority 0401 Authentication 04 Authority 0402 Authorization 04 Authority 0403 User Delegation 错误码列表 错误码 错误信息 MDX-00000001 内部错误 MDX-01020001 缺少同步用户信息配置 MDX-01020002 配置项解析错误 MDX-01040001 生成诊断包的节点不是当前节点 MDX-01040002 未找到诊断包生成所需的数据集 MDX-01040003 诊断包生成节点异常 MDX-01040004 序列化诊断包生成所需数据集异常 MDX-01040005 未找到诊断包文件 MDX-01040006 诊断包下载异常 MDX-01050001 同步用户信息配置无效 MDX-01050002 同步用户信息更新请求非法 MDX-01060001 无效的角色名称 MDX-01060002 重复的角色名称 MDX-01060003 用户异常 MDX-01060004 角色不存在 MDX-01060005 用户不存在 MDX-01060006 尝试删除已分配用户的角色 MDX-01060007 无效的角色 MDX-01060008 无法删除管理员角色 MDX-01060009 角色 ID 和名称不匹配 MDX-01060010 尝试向角色添加 / 从角色删除超过 1 个用户 MDX-01070001 插入数据集记录异常 MDX-01070002 插入 MDX_QUERY 记录异常 MDX-01070003 插入 SQL_QUERY 记录异常 MDX-01070004 插入角色记录异常 MDX-01070005 删除角色记录异常 MDX-01080001 用户密码解密错误 MDX-01080002 用户密码加密错误 MDX-01080009 版本号格式错误 MDX-02010002 获取 Kylin 表描述信息错误 MDX-02010003 获取 Kylin 模型描述信息错误 MDX-02010004 获取 Kylin 项目列表错误 MDX-02010005 获取 Kylin 用户列表错误 MDX-02010006 根据 Kylin 指定项目获取用户错误 MDX-02010007 根据 Kylin 指定用户组获取用户错误 MDX-02010008 获取 Kylin 用户权限信息错误 MDX-02010009 获取 Kylin 项目访问权限信息错误 MDX-02010010 URI 为空的 HTTP 请求 MDX-02010011 构建 URI 实例异常 MDX-02010012 未配置 Kylin 的 host / port MDX-02010013 Kylin 连接异常 MDX-02010014 发送给 Kylin 的 HTTP 请求失败 MDX-02010015 读取 Kylin 的 HTTP 响应内容异常 MDX-02020002 无法从指定项目中获取指定数据集 MDX-02020003 无法根据 ID 获取数据集 MDX-02020004 指定项目中已存在同名数据集 MDX-02020006 已存在同名维度表 MDX-02020007 已存在同别名维度表 MDX-02020008 已存在同别名度量 MDX-02020009 已存在同名计算度量 MDX-02020010 已存在同名命名集 MDX-02020011 文件夹名称格式错误 MDX-02020012 计算度量校验失败 MDX-02020014 非法的默认成员校验请求 MDX-02020015 不支持的数据集类型 MDX-02020016 无法连接 MDX 服务器 MDX-02020017 无法连接数据集 MDX-02020018 无效的维度用法 MDX-02020019 层级结构中存在来自其他表的列 MDX-02020020 无法从指定模型中获取指定维度表 MDX-02020021 无法从指定维度表和模型中获取指定维度 MDX-02020022 无法从指定模型中获取指定度量 MDX-02020023 无法获取指定计算度量 MDX-02020024 无法获取指定命名集 MDX-02020025 存在无效的数据集 MDX-02020026 Kylin 项目在存在问题 MDX-02020027 无效的数据集列表查询请求 MDX-02020028 无效或过期的数据集导出标识符 MDX-02020029 导出数据集时压缩异常 MDX-02020030 无效的数据集导入请求 MDX-02020031 导入数据集时解压异常 MDX-02020032 无效的数据集压缩文件 MDX-02020033 上传文件中不存在有效的数据集 MDX-03010003 未找到数据源文件 MDX-03010004 无法创建数据源文件 MDX-03010005 无法创建 schema 目录 MDX-03010006 无法创建 schema 文件 MDX-03010007 无法序列化 schema 文件 MDX-03020002 Drillthrough 仅支持 Tabular 格式 MDX-03020003 无法执行 Drillthrough 操作 MDX-03020005 XML/A 请求的 URL 格式错误 MDX-03030001 未找到 MDX 数据集 MDX-03030002 未找到 MDX 对象 MDX-03030003 无法解析 MDX 成员 MDX-03030004 MDX 语句解析错误 MDX-03030014 未找到计算成员中的层级结构 MDX-03030015 轴表达式类型错误 MDX-03030016 成员表达式返回类型错误 MDX-03030017 集合表达式返回类型错误 MDX-03030018 函数缺少参数 MDX-03030019 函数参数类型错误 MDX-03030020 未知 MDX 参数 MDX-03030021 未找到 MDX 成员 MDX-03030022 默认成员表达式返回类型错误 MDX-03030023 使用了无效的成员 MDX-03030024 未找到签名匹配的函数 MDX-03030025 找到多个签名匹配的函数 MDX-03030031 在多个轴上出现同一个层级结构 MDX-03030032 函数存在不属于同一个层级结构的参数 MDX-03030033 函数的参数不属于一个时间类型的维度表 MDX-03030034 无效的轴定义 MDX-03030035 存在名称重复的轴 MDX-03030037 元组包含属于相同层级结构的多个成员 MDX-03030038 VisualTotals 函数参数类型错误 MDX-03030042 数据类型转换的目标类型无效 MDX-03030043 函数不支持 NULL 成员作为参数 MDX-03030045 未定义时间类型维度表，不能使用此函数 MDX-03030046 未显式指定目标层级结构 MDX-03030047 层级结构中没有可以访问的成员 MDX-03030050 Drillthrough 被禁用 MDX-03030051 对未知成员进行 Drillthrough 操作 MDX-03030054 连接字符串中缺失属性 MDX-03030055 属于时间类型维度表的层级结构未定义时间类型 MDX-03030056 不属于时间类型维度表的层级结构定义了时间类型 MDX-03030064 计算成员属于一个无效维度 MDX-03030068 数据集中已存在同名的计算成员 MDX-03030076 未找到自定义函数的类 MDX-03030077 自定义函数的类定义非法 MDX-03030079 数据集中已存在同名的自定义函数 MDX-03030080 数据集中已存在同名的命名集 MDX-03030081 数据集中存在无效的计算度量或命名集表达式 MDX-03030087 无效的聚合方式 MDX-03030090 Descendants 函数参数类型错误 MDX-03030092 无法推断集合的成员类型 MDX-03030094 层级结构定义未包含任何层级 MDX-03030095 层级结构定义中的存在重名层级 MDX-03030103 笛卡尔积的结果大小超过上限 MDX-03030104 查询结果集中的成员数量超过上限 MDX-03030105 读取的成员数量超过上限 MDX-03030106 读取的度量值数量超过上限 MDX-03030107 查询取消 MDX-03030108 查询超时 MDX-03030109 聚合计算的迭代次数超过上限 MDX-03030110 层级结构未包含成员 MDX-03030157 函数无法进行 Native 优化 MDX-03030158 查询资源回收异常 MDX-03030159 并发执行的 MDX 查询数量达到上限 MDX-03030160 Mondrian 引擎并发执行的 SQL 查询数量达到上限 MDX-03030162 Sniper 引擎并发执行的 SQL 查询数量达到上限 MDX-03030163 RolapSchema 实例回收异常 MDX-03030164 MondrianServer 实例回收异常 MDX-03030165 RolapConnection 实例回收异常 MDX-03030166 聚合查询执行因超时取消 MDX-03030167 聚合查询执行取消 MDX-03030168 SniperResult 构造过程取消 MDX-03040003 未配置 MDX 集群中的节点列表 MDX-03040004 无法改写表达式 MDX-03040005 表达式不是一个函数表达式 MDX-03040006 表达式不是指定的函数表达式 MDX-03040007 表达式不是一个标识符 MDX-03040008 无效的命名集 Union 函数表达式 MDX-03040009 无效的命名集 Except 函数表达式 MDX-04010001 用户登陆鉴权错误 MDX-04010002 无效的 basic 鉴权信息 MDX-04010003 无效的 cookie 鉴权信息 MDX-04010004 无效的 gateway 鉴权信息 MDX-04010005 鉴权信息缺失 MDX-04010006 用户名 / 密码错误 MDX-04010007 用户被锁定 MDX-04010008 Kylin 鉴权失败 MDX-04010009 用户被禁用 MDX-04020001 非系统管理员用户 MDX-04020002 非系统管理员或项目管理员用户 MDX-04020003 用户无项目访问权限 MDX-04020004 未找到可用的数据集 MDX-04020005 项目中所有数据集均已损坏 MDX-04020006 用户无数据集权限 MDX-04030001 用户委任功能未启用 MDX-04030002 委任用户参数为空 MDX-04030003 委任用户参数过长 MDX-04030004 无效的委任用户参数 MDX-04030005 委任用户权限不足 Powered by Gitbook.            Last Modified： 2022-03-25 14:44:41 "},"operations/configuration.cn.html":{"url":"operations/configuration.cn.html","title":"任务配置","keywords":"","body":"任务配置 现 MDX for Kylin 会定期从与其对接的 Kylin 中同步数据，您可以使用 Kylin 的系统管理员账号进入管理员页面，查看任务情况。 进入参数页面，即可同步任务的运行情况，以及任务上一次运行的时间。 若任务因为意外情况停止，例如 Kylin 停机等，您可以点击重启同步任务按钮重启同步任务 若您修改了您 Kylin 中的同于执行同步任务的系统管理员的用户名或密码，您可以点击编辑用户信息按钮，更改用户名和密码。 Powered by Gitbook.            Last Modified： 2022-03-23 16:13:05 "},"operations/metadata.cn.html":{"url":"operations/metadata.cn.html","title":"元数据导入和导出","keywords":"","body":"元数据导入和导出 MDX 实例所有元数据和查询历史等信息都存储在数据库中，因此备份与恢复数据库是日常运维和系统升级过程中一个非常重要的环节。 MDX 目前支持 MySQL 和 PostgreSQL 作为元数据存储。其中 MySQL 推荐 5.7 及以后版本，PostgreSQL 推荐 10.1 及以后版本。 元数据导出 MySQL MySQL 通过 mysqldump 命令导出的。出于安全原因，建议将 -P 选项留空，并在随后的交互式输入中输入密码。 mysqldump -h[insight.database.ip] -P[insight.database.port] -u[insight.database.username] -p[password] [insight.database.name] > backup.sql 示例： mysqldump -hlocalhost -P3306 -uroot -proot insight > backup.sql PostgreSQL PostgreSQL 通过 pg_dump 命令导出，注意在随后的交互式输入中输入密码。 pg_dump -h [insight.database.ip] -p [insight.database.port] -U [insight.database.username] -d [insight.database.name] -W -F c -b -v -f backup.bak 元数据导入 MySQL MySQL 通过 mysql 命令导入已备份的元数据。 mysql -h[insight.database.ip] -P[insight.database.port] -u[insight.database.username] -p[password] [insight.database.name] 如果指定的数据库不存在，请先通过 MySQL 客户端工具或者命令行创建对应的数据库。 create database [insight.database.name]; PostgreSQL PostgreSQL 通过 pg_restore 命令导入备份的文件。 pg_restore -h [insight.database.ip] -p [insight.database.port] -U [insight.database.username] -W -d [insight.database.name] -v backup.bak 如果指定的数据库不存在，请先通过 createdb 命令创建数据库。 createdb [insight.database.name] 附录：数据表说明 数据表 功能 calculate_measure 计算度量定义 common_dim_relation 维度关系定义 custom_hierarchy 用户定义的层次 dataset 数据集 dim_table_model_rel 模型关系定义 mdx_info MDX 信息 mdx_query MDX 查询历史 measure_group 度量组定义 named_dim_col 维度列定义 named_dim_table 维度表定义 named_measure 度量定义 named_set 命名集定义 role_info 数据集角色信息 sql_query SQL 查询历史 user_info 用户信息 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"configuration/":{"url":"configuration/","title":"系统配置","keywords":"","body":"系统配置 在本章中，将为您介绍 MDX for Kylin 系统配置相关的内容，如配置文件、基本配置参数等。 Powered by Gitbook.            Last Modified： 2022-03-23 16:16:28 "},"configuration/files.cn.html":{"url":"configuration/files.cn.html","title":"配置文件","keywords":"","body":"配置文件 本节将介绍 MDX for Kylin 的配置文件等内容。 MDX for Kylin 配置文件一览表 文件名 描述 insight.properties 该文件是 MDX for Kylin 公用配置文件，绝大多数配置项都在此文件中。 log4j2.xml 该文件是 MDX for Kylin 的 log4j 配置文件，用于配置日志的各项参数。 set-jvm.sh 该文件为 MDX for Kylin 的 JVM 配置文件。 Powered by Gitbook.            Last Modified： 2022-03-25 14:47:37 "},"configuration/properties.cn.html":{"url":"configuration/properties.cn.html","title":"基本配置参数","keywords":"","body":"基本配置参数 MDX for Kylin 的配置文件 insight.properties 保存在 conf 目录中。用户可以通过修改相关配置，实现环境适配、性能优化等目的。 用户修改任何配置项之后，需要重启后方可生效。 1. 通用配置 2. Semantic Service 模块相关配置 3. MDX 模块相关配置 1. 通用配置 配置项 描述 insight.kylin.host 该参数指定需要连接的 Kylin 服务器的 IP 地址或 Hostname，如 127.0.0.1，默认值localhost insight.kylin.port 该参数指定需要连接的 Kylin 服务器的端口号，默认值7070 insight.kylin.ssl MDX for Kylin 访问 Kylin 是否启用 https，默认值false insight.database.type MDX for Kylin 使用的元数据库的类型，默认值mysql insight.database.useSSL MDX for Kylin 元数据库是否使用SSL连接，默认值false insight.database.ip MDX for Kylin 需要连接的元数据库的 IP 地址或 Hostname，默认值localhost insight.database.port MDX for Kylin 需要连接的元数据库的端口号，默认值3306 insight.database.name MDX for Kylin 需要连接的元数据库名称，默认值insight insight.database.username MDX for Kylin 需要连接的元数据库的用户名，默认值root insight.database.password MDX for Kylin 需要连接的元数据库的密码，默认值698d2c7907fc9b6dbe7f8a8c4cb0297a，即密码 root 的加密串 insight.mdx.cluster.nodes 该配置用于生成诊断包使用，该配置项需要您填写 MDX for Kylin 集群中所有节点的 IP 和 Port 信息。如果配置多个节点，请用英文逗号隔开，例如 IP_1:Port_1,IP_2:Port_2 insight.semantic.secret-key 该配置用于加密 MDX for Kylin 所需要用到密钥串，默认值3500d18495a54c54b9a3d56641a8a521。例如用于加密连接的元数据密码或用户登录密码，用户可按照需要变更自己的密钥串，如果变更对应的密钥串，则用户需要重新加密对应的密码等，建议在初次安装部署 MDX for Kylin 时候变更 2. Semantic Service 模块相关配置 配置项 描述 insight.semantic.datasource-version 该参数指定 MDX for Kylin 中 semantic service 连接的引擎的版本号，仅支持 2，表示连接的 Kylin insight.semantic.port 该参数指定 MDX for Kylin 中 semantic service 的端口号，默认值7080 insight.semantic.meta.sync.project-page-size 该参数指定 MDX for Kylin 中 semantic service 同步项目时，单页获取最大项目数，默认值1000 insight.dataset.verify.interval.count 该参数指定 MDX for Kylin 中 semantic service 进行数据集校验的时间间隔数，单位：20秒，例如：2 表示 2*20=40 秒。当且仅 insight.dataset.verify.enable 配置为 true 时生效，默认值15,即 5 分钟 insight.dataset.verify.enable 该参数指定 MDX for Kylin 中 semantic service 是否开启数据集同步校验功能，默认值true insight.semantic.model.version.verify 该参数指定 MDX for Kylin 中 semantic service 是否开启元数据模型版本检查，默认值false insight.semantic.startup.sync.enable 该参数指定 MDX for Kylin 中 semantic service 是否开启启动服务即开始进行同步任务，默认值true insight.semantic.segment.sync.enable 该参数指定 MDX for Kylin 中 semantic service 是否开启检查 Kylin 的 Segment 变化，并根据 Segment 变化清除 MDX for Kylin 的缓存，默认值true insight.semantic.meta.sync.user-page-size 该参数指定 MDX for Kylin 中 semantic service 从 Kylin 中同步用户信息时每页的大小，默认值100000 insight.semantic.cookie-age 该参数指定 MDX for Kylin 中 semantic service Web UI 访问时用户 cookie 的生命时长，默认值86400，即 86400 秒 insight.semantic.checkout.dataset.connect 该参数指定 MDX for Kylin 的数据集保存时，是否要进行连接校验，默认值true insight.semantic.connect.timeout MDX for Kylin 连接 Kylin 的连接超时时间，单位是毫秒，默认值5000 insight.semantic.socket.timeout MDX for Kylin 连接 Kylin 的连接 socket 超时时间，单位是毫秒，默认值10000 insight.kylin.only.normal.dim.enable MDX for Kylin 在多对多场景下是否只从 Kylin 拉取普通维度，默认值false，当前 Kylin 暂不支持 多对多场景 insight.semantic.connection.request.timeout MDX for Kylin 连接 Kylin 的连接请求超时时间，单位是毫秒，默认值8000 insight.semantic.max-http-header-size MDX for Kylin 的 http 请求 header 的最大长度，单位是 kb，默认值8192 insight.semantic.meta.keep.mdx-query.max.rows 系统中保存 MDX 查询历史记录的最大条数，默认值 1000000 insight.semantic.segment.sync.enable 是否同步 Kylin 的 Segment 信息，默认值true insight.semantic.zookeeper.enable 是否开启将服务信息注册到 ZooKeeper, 默认值false insight.semantic.zookeeper.address ZooKeeper 的地址，默认值localhost:2181 insight.semantic.zookeeper.node.path 注册的节点地址，默认值/mdx insight.semantic.zookeeper.session.timeout 与 ZooKeeper 连接的超时时间，默认值30000 insight.semantic.reject.enable 该参数用于指定是否启用拦截策略，启用后，对符合拦截策略的查询请求将会被拒绝，默认false。 3. MDX 模块相关配置 配置项 描述 insight.mdx.servlet-path 该参数指定 MDX for Kylin 中 mdx 的 servlet 路径，默认值/mdx/xmla/ insight.mdx.gateway-path 该参数指定 MDX for Kylin 中 gateway 的 servlet 路径，默认值/mdx/xmla_server/ insight.mdx.optimize-enabled 该参数指定 MDX for Kylin 中 mdx 是否开启语句优化，默认值true insight.mdx.calculate-total-need 该参数指定 MDX for Kylin 中 mdx 是否计算全局汇总及分类汇总，默认值true insight.mdx.schema.create-from-dataset 该参数指定 MDX for Kylin 中 mdx 是否从数据集中创建 schema，默认值true insight.mdx.schema.refresh.disable 该参数指定 MDX for Kylin 中 mdx 是否禁用刷新，默认值false insight.mdx.sql.orderby.enable 该参数指定 MDX for Kylin 中是否开启 SQL orderby，默认值true insight.mdx.sql.calcite-engine-hint.enable 该参数指定 MDX for Kylin 对接 Excel 时，进行包含 similar to 的查询时，是否强制 Kylin 使用 Calcite 引擎回答，默认值false insight.mdx.skip-axis-nonempty-check 该参数指定 MDX for Kylin 中计算轴时是否跳过空值校验，默认值true insight.mdx.mondrian.olap.case.sensitive 该参数指定 MDX for Kylin 中 mdx 语句是否大小写敏感，默认值true insight.mdx.mondrian.rolap.maxQueryThreads 该参数指定 MDX for Kylin 中 mdx 最大查询线程数，默认值50 insight.mdx.mondrian.query.sql.page.size 该参数指定 MDX for Kylin 中 mdx 分页操作时，单页获取最大记录数，默认值10000 insight.mdx.mondrian.rolap.generate.formatted.sql 该参数指定 MDX for Kylin 中 mdx 是否格式化输出 sql 语句，默认值false insight.mdx.mondrian.rolap.star.disableCaching 该参数指定 MDX for Kylin 中 mdx 是否禁用缓存，默认值false insight.mdx.mondrian.rolap.ignoreInvalidMembers 该参数指定 MDX for Kylin 中 mdx 是否忽略无效的 members，默认值true insight.mdx.mondrian.rolap.ignoreInvalidMembersDuringQuery 该参数指定 MDX for Kylin 中 mdx 在查询中是否忽略无效的 members，默认值true insight.mdx.mondrian.cache.expire-minute 该参数指定 MDX for Kylin 中 mdx 缓存过期时间为几分钟，默认值720 insight.mdx.mondrian.olap.pure-axes-calculate.source.type 该参数指定 MDX for Kylin 中 mdx 轴计算时的维度数据源类型，可选的参数有：SNAPSHOT, PARTIAL_CUBE, ALL_CUBE，默认值PARTIAL_CUBE insight.mdx.mondrian.olap.pure-axes-calculate.cardinality-gap 该参数指定 MDX for Kylin 中对只查询单个维度表的 SQL 语句强制使用 insight.mdx.mondrian.olap.pure-axes-calculate.source.type=SNAPSHOT 行为的维度表基数上限（不包含），特殊取值 -1 表示总是强制使用，0 表示不强制使用，默认值为 -1 insight.mdx.mondrian.olap.pure-axes-calculate.total-cardinality-gap 该参数指定 MDX for Kylin 中对查询完整的轴的 SQL 语句强制使用 insight.mdx.mondrian.olap.pure-axes-calculate.source.type=SNAPSHOT 行为的查询结果基数上限（不包含），特殊取值 -1 表示总是强制使用，0 表示不强制使用，默认值为 0 insight.mdx.mondrian.olap.support-non-default-all-member 该参数指定 MDX for Kylin 中 mdx 是否支持非默认为所有成员，默认值false insight.mdx.mondrian.olap.cell.calc.join-dims 该参数指定 MDX for Kylin 中 mdx 在计算 cell 时是否 join 其他维表，默认值true insight.mdx.mondrian.rolap.return-null-when-divide-zero 该参数指定 MDX for Kylin 中 mdx 除数为 0 时是否返回 0，默认值true insight.mdx.mondrian.rolap.optimize-tuple-size-in-aggregate.enable 该参数指定 MDX for Kylin 中 mdx 聚合时是否开启元组大小优化，默认值false insight.mdx.mondrian.rolap.calculate-cell-when-non-measure 该参数指定 MDX for Kylin 中 mdx 无度量时是否聚合单元数据，默认值false insight.mdx.mondrian.sql.fetch-dim-from-snapshot 该参数指定 MDX for Kylin 中 mdx 是否优先从快照中拉取维度数据，默认值true insight.mdx.mondrian.sql.enableOrderBy 该参数指定 MDX for Kylin 中 mdx sql查询时是否添加排序规则，默认值true insight.mdx.mondrian.jdbc.timezone 该参数指定 MDX for Kylin 中 mdx jdbc查询服务所在时区，默认值GMT+8:00 insight.mdx.mondrian.schema.init-level-group-order-by-key 该参数指定 MDX for Kylin 中 mdx 是否通过键值去初始化层级级别，默认值true insight.mdx.mondrian.query.filter-pushdown.enable 该参数指定 MDX for Kylin 中 mdx 是否开启过滤下推，默认值true insight.mdx.mondrian.query.filter-pushdown.in-clause-max-size 该参数指定 MDX for Kylin 中 mdx 子句最大过滤下推数量，默认值20 insight.mdx.mondrian.query.sql.customize.enable 该参数指定 MDX for Kylin 中 mdx 是否开启定制化 sql，默认值true insight.mdx.mondrian.query.sql.customize.class 该参数指定 MDX for Kylin 中 mdx CustomizeSqlQuery的实现类，默认值io.kylin.mdx.web.mondrian.rolap.sql.KylinSqlQuery insight.mdx.mondrian.query.sql.max.size 该参数指定 MDX for Kylin 中 mdx sql 查询时最大查询行数，默认值50000 insight.mdx.mondrian.rolap.star.disableLocalSegmentCache 该参数指定 MDX for Kylin 中 mdx 查询的 segments 是否开启本地缓存，生成特定缓存及查找块缓存 SPI，默认值false insight.mdx.mondrian.olap.triggers.enable 该参数指定 MDX for Kylin 中 mdx 当配置属性变更后是否通知 Mondrian，默认值true insight.mdx.mondrian.rolap.nonempty 该参数指定 MDX for Kylin 中 mdx 是否每一个查询轴需要非空设置，默认值false insight.mdx.mondrian.rolap.compareSiblingsByOrderKey 该参数指定 MDX for Kylin 中 mdx 是否对兄弟成员进行和从原表达式拉取成员进行校验，默认值false insight.mdx.mondrian.rolap.maxSqlThreads 该参数指定 MDX for Kylin 中 mdx 支持 SQL 的 Mondrian 实例的最大数量，默认值100 insight.mdx.mondrian.rolap.maxCacheThreads 该参数指定 MDX for Kylin 中 mdx 支持缓存时每一个 Mondrian 实例的最大线程数，默认值100 insight.mdx.mondrian.rolap.queryTimeout 设置 MDX 查询的超时时间，单位秒，默认值300 insight.mdx.mondrian.olap.NullMemberRepresentation 该参数指定 MDX for Kylin 中 mdx 当结果为空时如何输出展示，默认值#null insight.mdx.mondrian.visualtotal.solve.order 该参数指定 MDX for Kylin 中 mdx 设置总计顺序，默认值-1 insight.mdx.mondrian.cross-join.native.enable 该参数指定了 MDX for Kylin 下发查询时是否原生使用 Cross Join，默认值true insight.mdx.mondrian.filter.row.limit 该参数指定 MDX for Kylin 对接 Excel 时，进行 Filter 操作时，是否加入 Limit 条件，默认 0，表示不加入 Limit 条件。若为 10，将在查询中加入 limit 10 的 SQL 子句。注意：此处的参数必须要写入正整数，否则会引起 MDX 查询执行报错。注意：设置该参数后可能导致在 Excel 中对下拉列表的反选操作选择数据不全，默认值0 insight.mdx.mondrian.result.limit 该参数用于指定检查 SQL 返回的行数，Cell 的数量。如果超限，直接返回错误。默认值100000 insight.mdx.mondrian.mdprop.mdx.subqueries 该参数用于指示MDX对于子查询的支持级别，MDX默认为2，不支持子查询。如果需要MDX支持子查询，可以改成31，该功能为Beta版。 insight.mdx.mondrian.query.sql.model-priority-hint.enable 该参数用于指定是否在 SQL 语句中指定优先用于回答查询的模型，启用后，当前查询的数据集引用的模型会被指定为查询的高优先级模型。 默认值为false。注意指定优先模型只会在查询的度量属于同一模型时生效。 insight.mdx.xmla.support-rowset-visibilities 该参数用于指定是否启用对于 XML/A Schema 中的 HIERARCHY_VISIBILITY 和 MEASURE_VISIBILITY 限制条件的支持，默认值为false。启用该参数后，原有的包含透视表的 Excel 文件需要经过修复才能正常使用。 insight.mdx.mondrian.query.limit 该参数是系统支持的最大查询数量，默认1000。 Powered by Gitbook.            Last Modified： 2022-03-25 11:19:41 "},"configuration/jvm.cn.html":{"url":"configuration/jvm.cn.html","title":"JVM 参数","keywords":"","body":"JVM 参数配置 您可以在配置文件 $MDX_HOME/semantic-mdx/set-jvm.sh 中，进行 JVM 的配置。默认配置使用的内存较少，您可以根据自己的实际情况调节。该项配置的默认值如下: jvm_xms=-Xms3g jvm_xmx=-Xmx16g 您可以更改它，以修改其中的配置。 jvm_xms=-Xms3g # MDX for Kylin 启动时的 JVM 初始内存。 jvm_xmx=-Xmx16g # MDX for Kylin 启动时的 JVM 最大内存。 另外您也可以在 $MDX_HOME/conf/insight.properties 中，更改 JVM 配置，此设置的优先级将高于上述 set-jvm.sh，配置如下： insight.mdx.jvm.xms=-Xms3g insight.mdx.jvm.xmx=-Xmx16g 在启动 MDX for Kylin 时，系统会默认加载配置文件 $MDX_HOME/semantic-mdx/set-jvm.sh 中定义的参数。如果您修改了参数，需要重新启动 MDX for Kylin 才能使新参数值生效。 Powered by Gitbook.            Last Modified： 2022-03-23 16:36:00 "},"rest/":{"url":"rest/","title":"Rest API","keywords":"","body":"REST API MDX for Kylin 提供了丰富的 REST API。基于这些 API，第三方系统可以与 MDX for Kylin 紧密集成。 Powered by Gitbook.            Last Modified： 2022-03-23 16:41:46 "},"rest/authentication.cn.html":{"url":"rest/authentication.cn.html","title":"安全认证 API","keywords":"","body":"安全认证 API MDX for Kylin 所有的 API 都是基于 Basic Authentication 认证机制。Basic Authentication 是一种简单的访问控制机制，将帐号密码基于 Base64 编码后作为请求头添加到 HTTP 请求头中，后端会读取请求头中的帐号密码信息进行认证。以 MDX for Kylin 默认的账户密码 ADMIN:KYLIN 为例，对应帐号密码编码后结果为 Basic QURNSU46S1lMSU4=，那么 HTTP 对应的头信息为 Authorization: Basic QURNSU46S1lMSU4=。 Powered by Gitbook.            Last Modified： 2022-03-23 16:41:46 "},"rest/dataset.cn.html":{"url":"rest/dataset.cn.html","title":"数据集 API","keywords":"","body":"数据集 API 本节介绍数据集相关的接口调用。 导出数据集 导入数据集 更新数据集 获取数据集列表 导出数据集 GET http://:/api/dataset 请求参数： project : 项目名 datasetType : 数据集类型 datasetName : 数据集名称 请求 Header: Basic Auth 认证 Content-Type: application/json Curl 示例如下： curl -X GET \\ 'http://localhost:7080/api/dataset?project=learn_kylin&datasetType=mdx&datasetName=test' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type: application/json;charset=utf8' \\ -o export_dataset.json 命令解释：调用接口，将相应的 json 数据存入到当前目录的export_dataset.json 中 导入数据集 POST http://:/api/dataset?createType=import Basic Auth认证 Content-Type: application/json createType:import 固定值 HTTP Body 是 dataset 的 json 文件 Curl示例如下： curl -X POST \\ 'http://localhost:7080/api/dataset?createType=import' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type: application/json;charset=utf8' \\ -d \"@export_dataset.json\" 命令解释：调用接口导入数据集，json 为当前目录下的export_dataset.json 文件 更新数据集 PUT http://:/api/dataset Basic Auth认证 Content-Type: application/json HTTP Body 是 dataset 的 json 文件 Curl示例如下： curl -X PUT \\ 'http://localhost:7080/api/dataset' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type: application/json;charset=utf8' \\ -d \"@export_dataset.json\" 命令解释：调用接口导入数据集，json 为当前目录下的export_dataset.json 文件 获取数据集列表 GET http://:/api/datasets/MDX/ Basic Auth认证 Content-Type: application/json Curl示例如下： curl -X GET \\ 'http://localhost:7080/api/datasets/MDX/learn_kylin' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type: application/json;charset=utf8' \\ -o dataset.json Powered by Gitbook.            Last Modified： 2022-03-23 16:41:46 "},"rest/role.cn.html":{"url":"rest/role.cn.html","title":"数据集角色 API","keywords":"","body":"数据集角色 API 对于有对数据集角色进行相关操作的需求，可以使用本节介绍的相关 API 进行操作。 相关操作包含： 新增角色 更新角色 查询角色 删除角色 向已有角色增加单个用户 从已有角色删除单个用户 查询角色列表 新增角色 该 API 可以用于新增角色，并且直接向其中添加用户 POST http://host:port/api/role Basic Auth 认证 Content-Type: application/json HTTP Body 是 json，内容如下： { \"name\": \"[角色名]\", \"contains\": [ { \"type\": \"user\", \"name\": \"[用户名1]\" }, { \"type\": \"user\", \"name\": \"[用户名2]\" } ], \"description\": \"[角色描述]\" } Curl 示例如下： curl -X POST \\ 'http://host:port/api/role' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type:application/json;charset=utf8' \\ -d '{\"name\":\"role_test\",\"contains\":[{\"type\":\"user\",\"name\":\"ADMIN\"}],\"description\":\"test\"}' 命令解释：调用接口，新增包含ADMIN用户的数据集角色：role_test。 返回信息 { \"status\": 0, \"data\": { \"role_id\": 2 } } 返回信息解释：status 为 0 表示成功, role_id 为角色 id。 更新角色 该 API 可以用于角色中的用户 PUT http://host:port/api/role/{roleId} URL Path Variable roleId: 取值为角色 id Basic Auth 认证 Content-Type: application/json HTTP Body 是 json，内容如下： { \"name\": \"[角色名]\", \"contains\": [ { \"type\": \"user\", \"name\": \"[用户名1]\" }, { \"type\": \"user\", \"name\": \"[用户名1]\" } ], \"description\": \"[角色描述]\" } Curl 示例如下： curl -X PUT \\ 'http://host:port/api/role/2' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type:application/json;charset=utf8' \\ -d '{\"name\":\"role_test\",\"contains\":[{\"type\":\"user\",\"name\":\"ADMIN\"}],\"description\":\"test_update\"}' 命令解释：调用接口，全量更新名称为 role_test 的数据集角色及描述。 返回信息 { \"status\": 0, \"data\": { \"role_id\": 2 } } 返回信息解释：status 为 0 表示成功，role_id 为角色 id。 查询角色 GET http://host:port/api/role/{roleId} URL Path Variable roleId: 取值为角色 id Basic Auth认证 Content-Type: application/json Curl 示例如下： curl -X GET \\ 'http://host:port/api/role/2' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' 命令解释：调用接口，查询角色 id 为 2 的数据集角色信息。 返回信息 { \"status\": 0, \"data\": { \"name\": \"role_test\", \"description\": \"test_update\", \"contains\": [ { \"type\": \"user\", \"name\": \"ADMIN\" } ] } } 返回信息解释：status为0表示成功，data包含数据集角色信息。 删除角色 DELETE http://host:port/api/role/{roleId} URL Path Variable roleId: 取值为角色id Basic Auth认证 Content-Type: application/json Curl 示例如下： curl -X DELETE \\ 'http://host:port/api/role/2' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' 命令解释：调用接口，删除角色id为2的数据集角色信息。 返回信息 { \"status\" : 0, \"data\" : \"success\" } 返回信息解释：status为0表示成功，data包含删除成功信息。 向已有角色增加单个用户 POST http://host:port/api/role/user/visibility/{roleId} URL Path Variable roleId: 取值为角色 id Basic Auth认证 Content-Type: application/json HTTP Body 是 json，内容如下： { \"name\": \"[角色名]\", \"contains\": [ { \"type\": \"user\", \"name\": \"[用户名]\" } ], \"description\": \"\" } Curl 示例如下： curl -X POST \\ 'http://host:port/api/role/user/visibility/2' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type:application/json;charset=utf8' \\ -d '{\"name\":\"role_test\",\"contains\":[{\"type\":\"user\",\"name\":\"ANALYST\"}],\"description\":\"\"}' 命令解释：调用接口，向已有数据集角色 role_test 中新增一个用户 ANALYST 。 返回信息 { \"status\" : 0, \"data\" : \"success\" } 返回信息解释：status 为 0 表示成功，data 包含删除成功信息。 从已有角色删除单个用户 DELETE http://host:port/api/role/user/visibility/{roleId} URL Path Variable roleId: 取值为角色 id Basic Auth认证 Content-Type: application/json Curl 示例如下： curl -X DELETE \\ 'http://host:port/api/role/user/visibility/2' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' \\ -H 'Content-Type:application/json;charset=utf8' \\ -d '{\"name\":\"role_test\",\"contains\":[{\"type\":\"user\",\"name\":\"ANALYST\"}],\"description\":\"\"}' 命令解释：调用接口，从已有数据集角色 role_test 中移除一个用户 ANALYST 。 返回信息 { \"status\" : 0, \"data\" : \"success\" } 返回信息解释：status 为 0 表示成功，data 包含删除成功信息。 查询角色列表 GET http://host:port/api/roles Basic Auth认证 Content-Type: application/json URL Parameters pageNum- 必选 Integer, 页数，最小为 0 pageSize- 必选 Integer, 每页大小 containsDesc- 必选 Boolean , 是否包含角色描述 RoleName- 可选 String , 模糊查询字符串，不选为正常全查询，选定则会根据对应字符串进行模糊查询 Curl 示例如下： curl -X GET \\ 'http://host:port/api/roles?pageNum=0&pageSize=500&containsDesc=true' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' 命令解释：调用接口，返回指定分页的数据集角色列表。 返回信息 { \"status\": 0, \"data\": { \"pageNum\": 0, \"pageSize\": 500, \"list\": [ { \"id\": 3, \"name\": \"role_test\", \"description\": \"test_update\" }, { \"id\": 1, \"name\": \"Admin\", \"description\": \"This role is an admin role with all semantic information access to all datasets\" } ], \"total\": 2 } } 返回信息解释：status 为 0 表示成功，data 包含数据集角色列表信息。 Powered by Gitbook.            Last Modified： 2022-03-23 16:41:46 "},"rest/query.cn.html":{"url":"rest/query.cn.html","title":"查询相关 API","keywords":"","body":"查询相关 API 对于有对查询进行相关操作的需求，可以使用本节介绍的相关 API 进行操作。 相关操作包含： 清除 MDX 查询缓存 清除 MDX 查询缓存 MDX for Kylin 会保留 MDX 查询的缓存，若要设置缓存驻留时间，详见配置文件说明 GET http://host:port/mdx/xmla//clearCache 请求参数: 项目名称: 用于指定清除缓存的项目 请求 Header: Basic Auth 认证 Content-Type: application/json Curl 示例如下： curl -X GET \\ 'http://host:port/mdx/xmla/clearCache' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' curl -X GET \\ 'http://host:port/mdx/xmla//clearCache' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' 命令解释：调用接口，清除所有 MDX 缓存。 返回信息 \"Cache has been cleared.\" \" Cache has been cleared.\" 返回信息解释：缓存已被清除。 Powered by Gitbook.            Last Modified： 2022-03-23 16:41:46 "},"appendix/":{"url":"appendix/","title":"附录","keywords":"","body":"附录 Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"appendix/faq.cn.html":{"url":"appendix/faq.cn.html","title":"常见问题","keywords":"","body":"常见问题 以下收集了用户在学习使用 MDX for Kylin 过程中经常遇到的一些问题。 Q：关于 MDX for Kylin 查询缓存的相关说明 A：MDX for Kylin 在如下情况下将清除缓存： MDX for Kylin 会主动的探测 Kylin 的 Segment 变化。在发现变化后，MDX for Kylin 会主动清除缓存。 dataset 元数据变更，任何修改 dataset 的操作，都会导致当前 dataset 的查询缓存失效； 主动调用清除 MDX 查询缓存接口，详见手册 具体命令如下： curl -X GET \\ 'http://host:port/mdx/xmla/clearCache' \\ -H 'Authorization: Basic QURNSU46S1lMSU4=' 注意：该接口调用后会刷新 MDX 所有项目的查询缓存； 查询缓存 12 小时后自动失效。失效时间可通过 $MDX_HOME/conf/insight.properties 中的参数 insight.mdx.mondrian.cache.expire-minute 调整，当前默认值 12 小时。 Powered by Gitbook.            Last Modified： 2022-03-25 15:27:05 "},"appendix/knownlimitation.cn.html":{"url":"appendix/knownlimitation.cn.html","title":"已知限制","keywords":"","body":"已知限制 以下记录了 MDX for Kylin 一些已知限制。 限制 1: 不同于 SQL Server Analysis Service，仅层级结构才可以在 Excel 中进行展开操作。详细操作如下图所示。 限制 2: 当在行列上添加层级结构并在其依赖的普通维度上做筛选时，使用 CurrentMember 的计算度量的总计、小记结果可能会不准确。 限制 3: Aggregate 函数的支持尚不完善，Aggregate 函数的值会受到外部筛选条件的影响。例如：图中计算度量 Aggregate-CM_1-DateKey 和 Aggregate-CM_1-Due Calendar Date 均为 Aggregate({[20120401], [20120402], [20120403], [20120404]}, [Measures].[InternetSales COUNT])，值应该均为 26，但在层级结构的筛选条件为 20120403，Aggregate-CM_1-DateKey 的值受到了筛选，变成了7。 限制 4: MDX 当前版本集群部署时的负载均衡策略只支持 Ip Hash ，不支持 Round Robin 等其他方式。设置为其他负载均衡策略时，可能会导致 Excel 在查询取消时 ，Excel 响应缓慢或者发生异常。 限制 5: MDX 当前版本对接的 Kylin 暂不支持多对多关系。 Powered by Gitbook.            Last Modified： 2022-03-23 16:45:16 "},"appendix/formatstring.cn.html":{"url":"appendix/formatstring.cn.html","title":"预定义度量格式和度量格式字符","keywords":"","body":"预定义度量格式和度量格式字符 预定义度量格式 格式名    说明 无格式 不设置任何格式。 数值 可选择是否带千位分隔符、负数的格式，可配置小数点分隔符后的位数，其中小数点分隔符左侧至少有一个数字。 货币 可选择是否带千位分隔符、负数的格式，可配置小数点分隔符后的位数，显示的货币符号会基于系统区域设置。 百分比 将数字乘以 100 后显示，并在右侧追加百分号 (%)。 可配置小数点分隔符后的位数。 度量格式表达式结构 自定义格式表达式可以有一到三部分（各部分之间用分号分隔）。 使用情况 说明 一个部分 格式表达式应用于所有值 两部分 第一部分应用于正值和零，第二部分应用于负值。 三部分 第一部分应用于正值，第二部分应用于负值，第三部分应用于零。 下面的示例有两部分。 第一部分定义正值和零的格式，第二部分定义负值的格式。 #,##0;(-#,##0) 下面的示例有三部分。 第一部分定义正值的格式，第二部分定义负值的格式，第三部分应用于零，即如果值为零，则显示“Zero”。 $#,##0;(-$#,##0);\\Z\\e\\r\\o 度量格式字符 字符 说明 0 表示显示数字或零 (0) 的数字占位符。如果数字在格式字符串中出现零的位置有一个数字，则格式化的值将显示该数字。否则，格式化的值在该位置显示零。如果数字的位数少于格式字符串中的零(在小数的任一侧)，则格式化的值将显示前导或尾随零。如果数字的小数点分隔符右侧的位数多于格式表达式中小数点分隔符右侧的零数，则格式化的值会将数字四舍五入到与有零数一样多的小数位。如果数字的小数点分隔符左侧的位数多于格式表达式中小数点分隔符左侧的零位数，则格式化的值将显示额外的位数而无需修改。 # 表示显示数字或不显示数字的数字占位符。如果表达式在格式字符串中出现数字符号 ( # )的位置有一 个数字，则格式化的值将显示该数字。否则，格式化的值在该位置不显示任何内容。数字符号 ( # ) 占位符的工作方式与零 ( 0 ) 数字占位符类似，但如果数字的位数与格式表达式中小数点分隔符两侧的 # 字符数相同或更少，则不会显示前导零和尾随零。 . 表示一个小数占位符，它决定了在小数点分隔符的左侧和右侧显示的位数.如果格式表达式仅包含句点 ( . ) 左侧的数字符号 ( # ) 字符，则小于 1 的数字以小数分隔符开头。若要显示带小数的前导零，请使用零 (0) 作为小数点分隔符左侧的第一个数字占位符。 % 表示百分比占位符。表达式乘以 100。百分比字符 ( % ) 插入格式字符串中百分比出现的位置。 , 表示在小数点分隔符左侧有四个或更多位的数字中将千位与百位分开的千位分隔符。 E- E+ e- e+ 表示科学记数法。如果格式表达式在 E- 、E+、e- 或 e+ 的右侧至少包含一个数字占位符（ 0 或 # ），则以科学记数法格式显示格式化值，并在数字和其指数之间插入 E 或 e。 右侧的数字占位符数决定了指数中的位数。 使用 E- 或 e- 在负指数的后面包括一个减号。 使用 E + 或 e + 在负指数的后面包括一个减号，在正指数的后面包括一个加号。 + - $ ( ) 显示文字字符。推荐用法如下：+：用于正值- 或 ( )：用于负值$：用于货币符号 \\ 显示格式字符串中的下一个字符。若要将具有特殊含义的字符显示为文字字符，请在该字符前加上一个反斜杠 (\\) 。 反斜杠本身不显示。若要显示反斜杠，请使用两个反斜杠 (\\) 。 不能显示为文字字符的字符包括下列：# 、 0、 % 、 E、 e、 , 和 . Powered by Gitbook.            Last Modified： 2022-03-16 16:21:14 "},"contact/":{"url":"contact/","title":"联系我们","keywords":"","body":"联系我们 欢迎通过以下方式与我们联系： 👏👏👏 Github Issue（首选） 请选择三种合适的 Issue 模板来获取社区支持 选择合适的 Issue Template 邮件组 请发送邮件到 user@kylin.apache.org，如何订阅请阅读： https://kylin.apache.org/community/. 微信群（中文用户） 请扫码添加K小助微信号，添加成功后，发送 mdx 这 3 个英文字母进群。 Powered by Gitbook.            Last Modified： 2022-03-30 18:30:19 "}}